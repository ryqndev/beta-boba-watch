(this["webpackJsonpboba-watch"]=this["webpackJsonpboba-watch"]||[]).push([[7],{302:function(e,t,a){"use strict";var n=a(8),c=a(0);t.a=function(){var e=Object(c.useState)([]),t=Object(n.a)(e,2),a=t[0],i=t[1],s=Object(c.useState)([]),r=Object(n.a)(s,2),o=r[0],l=r[1],d=Object(c.useCallback)((function(){i(JSON.parse(localStorage.getItem("drinkids")))}),[]);return Object(c.useEffect)(d,[d]),Object(c.useEffect)((function(){l(a.map((function(e){return JSON.parse(localStorage.getItem(e))})))}),[a]),{drinkids:a,drinks:o,update:d}}},303:function(e,t,a){"use strict";var n=a(0);t.a=function(){return{getLocationsNearby:Object(n.useCallback)((function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n="https://us-central1-boba-watch-firebase.cloudfunctions.net/locator";fetch(n+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(a)}),[]),getLocationsByText:Object(n.useCallback)((function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},n="https://us-central1-boba-watch-firebase.cloudfunctions.net/nearbyLocations";fetch(n+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(a)}),[])}}},304:function(e,t,a){"use strict";var n=a(8),c=a(0),i=a(13),s=a(40),r=a(27),o=a(73);t.a=function(e){var t=Object(c.useState)(Object(o.c)()),a=Object(n.a)(t,2),l=a[0],d=a[1],b=Object(c.useContext)(r.a),j=Object(n.a)(b,1)[0];return Object(c.useEffect)((function(){if(void 0===e||j.uid===e)return d(JSON.parse(localStorage.getItem("metrics")));d({}),i.b.collection("users/".concat(e,"/user")).doc("stats").get().then((function(e){d(e.data())})).catch(s.a)}),[e,j.uid]),l}},307:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(50),c=a(8),i=a(0),s=function(e){var t=Object(i.useState)([]),a=Object(c.a)(t,2),s=a[0],r=a[1];return Object(i.useEffect)((function(){var t={};e.forEach((function(e){var a,c,i,s;if((null===e||void 0===e||null===(a=e.address)||void 0===a?void 0:a.lat)&&(null===e||void 0===e||null===(c=e.address)||void 0===c?void 0:c.lng)){var r="".concat(e.address.lat).concat(e.address.lng).concat(null===e||void 0===e?void 0:e.location);t[r]={coordinates:[e.address.lat,e.address.lng],location:null===e||void 0===e?void 0:e.location,address:null===e||void 0===e?void 0:e.address,drinks:[].concat(Object(n.a)(null!==(i=null===t||void 0===t||null===(s=t[r])||void 0===s?void 0:s.drinks)&&void 0!==i?i:[]),[{id:e.id,date:null===e||void 0===e?void 0:e.date}])}}})),r(Object.values(t))}),[e]),{locations:s}}},309:function(e,t,a){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var a=parseInt(e/100);return isNaN(a)?"---":a}var n=Number(e/100).toFixed(2);return isNaN(n)?"---":n}a.d(t,"a",(function(){return n}))},312:function(e,t,a){"use strict";a.d(t,"a",(function(){return n.a})),a.d(t,"b",(function(){return c.a})),a.d(t,"c",(function(){return i.a}));a(107);var n=a(71),c=a(302),i=a(303);a(105),a(8),a(0),a(109),a(304),a(108)},322:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return E})),a.d(t,"c",(function(){return $})),a.d(t,"d",(function(){return ne}));var n=a(0),c=a(347),i=a.n(c),s=a(346),r=a(328),o=a.n(r),l=a(2),d=function(e){var t=e.spent,a=void 0===t?0:t,n=e.budget,c=void 0===n?1:n,r=e.theme;return Object(l.jsxs)("div",{className:o.a.container,children:[Object(l.jsxs)("div",{className:o.a.description,children:[Object(l.jsxs)("p",{children:["MONTHLY LIMIT: $",c/100]}),Object(l.jsxs)("span",{children:["$",(a/100).toFixed(2)]}),Object(l.jsxs)("p",{children:["REMAINING: $",(c-a)/100]})]}),Object(l.jsx)("svg",{className:o.a.chart,viewBox:"0 0 100 100",children:Object(l.jsx)(s.a,{className:o.a.full,left:50,top:50,children:Object(l.jsx)(i.a,{data:[{label:"spent",value:a},{label:"unspent",value:c-a}],pieSortValues:function(){return 1},pieValue:function(e){return e.value},fill:function(e){return"spent"===e.data.label?"#14e33a":"default"===r?"#d8d8d8":"#223242"},outerRadius:48,innerRadius:32,cornerRadius:2,padAngle:.1})})})]})},b=Object(n.memo)(d),j=a(9),u=a(8),h=a(298),p=a(326),O=a.n(p),m=a(327),_=a.n(m),x=a(17),f=a.n(x),v=a(28),k=a(116),N=a(115),g=a.n(N),D=a(114),M=a(329),S=a.n(M),y=function(e){var t=e.name,a=e.location,c=e.description,i=e.expanded,s=e.image,r=e.date,o=Object(h.a)().t,d=Object(n.useState)(!1),b=Object(u.a)(d,2),j=b[0],p=b[1],O=new g.a;return Object(n.useEffect)((function(){i&&s&&Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,Object(D.b)(s);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))()}),[s,i]),Object(l.jsxs)("div",{className:S.a.container,children:[Object(l.jsxs)("p",{className:S.a.title,children:[t,Object(l.jsxs)("span",{children:[" @ ",a]})]}),j&&Object(l.jsx)("img",{src:j,className:S.a["user-uploaded"],alt:"user-upload"}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:S.a.description,children:c&&""!==c?Object(l.jsx)(k.b,{id:S.a.preview,view:{menu:!1,md:!1},readOnly:!0,renderHTML:function(e){return O.render(e)},canView:{menu:!1,md:!1,html:!1,fullScreen:!1,hideMenu:!1},value:c}):Object(l.jsx)("span",{children:"[no description]"})}),Object(l.jsx)("br",{}),Object(l.jsxs)("p",{className:S.a.date,children:[Object(l.jsx)("span",{children:o("on")})," ",r.toString()]})]})},w=a(309),P=a(19),T=a(330),A=a.n(T),E=function(e){var t=e.data,a=Object(h.a)().t,c=Object(n.useState)(!1),i=Object(u.a)(c,2),s=i[0],r=i[1],o=new Date(t.date);return Object(l.jsxs)("div",{className:A.a.container,children:[Object(l.jsxs)("div",{className:A.a["basic-details"],onClick:function(){r(!s)},children:[Object(l.jsx)("p",{className:A.a.place,children:t.location}),Object(l.jsxs)("p",{className:A.a.price,children:[a("$"),Object(w.a)(t.price)]}),Object(l.jsx)("div",{className:A.a["expand-icon"],children:s?Object(l.jsx)(O.a,{}):Object(l.jsx)(_.a,{})}),Object(l.jsx)("p",{className:A.a.name,children:t.name}),Object(l.jsx)("p",{className:A.a.time,children:o.toDateString().substr(4)})]}),Object(l.jsx)("div",{className:Object(P.a)(A.a["collapsed-info"],s&&A.a.expanded),children:Object(l.jsx)(y,Object(j.a)(Object(j.a)({},t),{},{expanded:s,date:o}))})]})},C=a(487),L=a(485),R=a(486),I=a(489),B=a(331),F=a.n(B),V=a(483),J=a(494),H=a(495),G=function(e){var t=e.bin,a=e.handleMouseOver,n=e.hideTooltip;return Object(l.jsx)("rect",{width:t.width,height:t.height,x:t.x,y:t.y,fill:t.color,fillOpacity:t.opacity,"data-bin":JSON.stringify({row:t.row,column:t.column,count:t.count}),onMouseOver:a,onMouseOut:n})},z=Object(n.memo)(G),X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],q=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 AM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM","12 PM"],U=function(e){var t=e.data,a=Object(V.a)(),n=a.tooltipData,c=a.tooltipLeft,i=a.tooltipTop,r=a.tooltipOpen,o=a.showTooltip,d=a.hideTooltip,b=Object(J.a)({detectBounds:!0,scroll:!0}),j=b.containerRef,u=b.TooltipInPortal,h=function(e){var t=Object(H.a)(e.target.ownerSVGElement,e);o({tooltipLeft:t.x,tooltipTop:t.y,tooltipData:JSON.parse(e.target.dataset.bin)})},p=0,O=t.map((function(e,t){return{bin:t+1,bins:e.map((function(e,t){return e>p&&(p=e),{count:e,bin:t}}))}}));return Object(l.jsxs)("svg",{ref:j,className:F.a.container,viewBox:"0 0 214 400",children:[Object(l.jsx)(L.a,{scale:Object(I.a)({domain:X,range:[24,209]}),top:14,tickLength:4,tickClassName:F.a.tick,tickStroke:"grey",stroke:"#aaa",tickLabelProps:function(){return{className:F.a["tick-label"],y:-7,textAnchor:"middle"}}}),Object(l.jsx)(R.a,{scale:Object(I.a)({domain:q,range:[13,396]}),left:24,orientation:"left",tickLength:4,tickClassName:F.a.tick,tickStroke:"grey",stroke:"#aaa",numTicks:24,tickLabelProps:function(){return{className:F.a["tick-label"],transform:"translate(0, 2)",x:-22,textAnchor:"left"}}}),Object(l.jsx)(s.a,{left:20,children:Object(l.jsx)(C.a,{data:O,xScale:function(e){return 26.5*e+4},yScale:function(e){return 16*e+12},colorScale:function(e){return"rgba(246, 128, 128, ".concat(0===e?p>5?.01:.1:e/p,")")},binWidth:27.5,binHeight:17,children:function(e){return e.map((function(e){return e.map((function(e){return Object(l.jsx)(z,{bin:e,handleMouseOver:h,hideTooltip:d},"heatmap-rect-".concat(e.row,"-").concat(e.column))}))}))}})}),r&&Object(l.jsx)(u,{top:i,left:c,children:Object(l.jsxs)("div",{className:F.a.tooltip,children:[Object(l.jsxs)("time",{children:[X[n.column]," | ",q[n.row]]}),Object(l.jsxs)("p",{children:[Object(l.jsxs)("strong",{children:[n.count," "]}),"drink",1===n?"":"s"," purchased"]})]})},Math.random())]})},$=Object(n.memo)(U),Z=a(300),K=a(432),W=a(49),Y=a(462),Q=a(307),ee=a(333),te=a.n(ee),ae=function(e){var t=e.className,a=e.theme,n=e.drinks,c=Object(Q.a)(n).locations;return Object(l.jsx)(W.d,{className:Object(P.a)(t,te.a.container),scrollWheelZoom:!1,touchZoom:!0,dragging:!0,zoom:2.5,theme:a,children:function(e){return c.map((function(e,t){var a=e.coordinates,n=e.drinks,c=e.location;return Object(l.jsx)(Z.a,{center:a,radius:10,fill:!0,weight:1,color:"#F68080",fillColor:"#F68080",fillOpacity:"0.5",children:Object(l.jsx)(K.a,{children:Object(l.jsxs)("div",{className:te.a.popup,children:[Object(l.jsx)("h2",{children:c}),Object(l.jsxs)("p",{children:["Visited ",Object(l.jsx)("span",{children:n.length})," times"]}),Object(l.jsx)("p",{children:"Recent visits:"}),n.slice(0,5).map((function(e){var t=e.date;return Object(l.jsx)("div",{children:Object(Y.a)(new Date(t),"MMM d, yyyy h:mm a")},t)}))]})})},JSON.stringify(a)+c)}))}})},ne=Object(n.memo)(ae)},328:function(e,t,a){e.exports={container:"BudgetPieChart_container__10gdb",description:"BudgetPieChart_description__2OBml",chart:"BudgetPieChart_chart__1T4nE",full:"BudgetPieChart_full__1P93t"}},329:function(e,t,a){e.exports={container:"ExpandedDrinkDescription_container__1SzUV",title:"ExpandedDrinkDescription_title__25UE8",date:"ExpandedDrinkDescription_date__2rvD_","user-uploaded":"ExpandedDrinkDescription_user-uploaded__25rwl",description:"ExpandedDrinkDescription_description__NXitR",preview:"ExpandedDrinkDescription_preview__2teka"}},330:function(e,t,a){e.exports={container:"DrinkPanel_container__1Nb30","basic-details":"DrinkPanel_basic-details__3nAr_",place:"DrinkPanel_place__2Fb01",time:"DrinkPanel_time__1pDZ9",price:"DrinkPanel_price__1koV9",name:"DrinkPanel_name__1mJ95","expand-icon":"DrinkPanel_expand-icon__3A8kA","collapsed-info":"DrinkPanel_collapsed-info__2-Bj9",expanded:"DrinkPanel_expanded__3RTFx",description:"DrinkPanel_description__3HGRs",options:"DrinkPanel_options__1xkeV"}},331:function(e,t,a){e.exports={container:"PurchaseTimeHeatMap_container__3pKA-",tick:"PurchaseTimeHeatMap_tick__1RETz","tick-label":"PurchaseTimeHeatMap_tick-label__3nvPf",tooltip:"PurchaseTimeHeatMap_tooltip__37KtM"}},333:function(e,t,a){e.exports={container:"VisitedMap_container__q8KED",popup:"VisitedMap_popup__4sXqG"}},438:function(e,t,a){e.exports={scrollable:"MobileDashboard_scrollable__38U-O",container:"MobileDashboard_container__2G7vX",bw:"MobileDashboard_bw__1ubg0",title:"MobileDashboard_title__2JEoX","chart-holder":"MobileDashboard_chart-holder__2TxqN",description:"MobileDashboard_description__SFphF",budget:"MobileDashboard_budget__1_M6-",limit:"MobileDashboard_limit__F2rfy",total:"MobileDashboard_total__1CKab",heatmap:"MobileDashboard_heatmap__1Mg_n",map:"MobileDashboard_map__11aHA","visible-map":"MobileDashboard_visible-map__23l4c","daily-chart":"MobileDashboard_daily-chart__1XI0-"}},439:function(e,t,a){e.exports={container:"DesktopDashboard_container__2_9ZB",title:"DesktopDashboard_title__noXbp",content:"DesktopDashboard_content__212SG",map:"DesktopDashboard_map__1QRbu",heatmap:"DesktopDashboard_heatmap__d_DVi",stats:"DesktopDashboard_stats__1GsPr",budget:"DesktopDashboard_budget__3zywz",total:"DesktopDashboard_total__2P12k",xy:"DesktopDashboard_xy__22k3y",sidebar:"DesktopDashboard_sidebar__2bXL-","aside-container":"DesktopDashboard_aside-container__3RRe_",recent:"DesktopDashboard_recent__3Zl5r",search:"DesktopDashboard_search__1q7Ud"}},493:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(71),i=a(8),s=a(298),r=a(19),o=a(309),l=a(322),d=a(49),b=a(27),j=a(312),u=a(304),h=a(438),p=a.n(h),O=a(2),m=function(e){var t=e.theme,a=Object(s.a)().t,c=Object(u.a)(),h=Object(n.useContext)(b.a),m=Object(i.a)(h,1)[0],_=Object(j.b)().drinks;return Object(O.jsx)("div",{className:p.a.scrollable,children:Object(O.jsxs)("main",{className:p.a.container,children:[Object(O.jsx)("h4",{className:Object(r.a)(p.a.bw,p.a.title),children:a("Monthly Spending")}),Object(O.jsx)(d.a,{id:"chart-holder",className:p.a["daily-chart"],children:Object(O.jsx)(l.a,{budget:m.profile.budget,spent:c.tc,theme:t})}),Object(O.jsxs)(d.a,{className:p.a.budget,children:[Object(O.jsxs)("p",{children:[a("This is how much you\u2019ve spent on drinks so far"),":"]}),Object(O.jsxs)("h2",{className:p.a.bw,children:[a("$"),Object(o.a)(c.ctc,c.ctc/1e4>1)]})]}),Object(O.jsxs)(d.a,{className:p.a.limit,style:{backgroundPositionY:2.7*(100-parseInt(c.td/m.profile.limit*100))},children:[Object(O.jsxs)("h3",{className:p.a.bw,children:[parseInt(c.td/m.profile.limit*100),"%"]}),Object(O.jsx)("p",{children:a("to your max number of drinks this month")})]}),Object(O.jsxs)(d.a,{className:p.a.total,children:[Object(O.jsx)("h2",{className:p.a.bw,children:c.td}),Object(O.jsx)("p",{children:a("drinks this month")})]}),Object(O.jsxs)(d.a,{className:p.a.heatmap,children:[Object(O.jsx)("h2",{children:"Drink Frequency"}),Object(O.jsx)(l.c,{data:c.d})]}),Object(O.jsx)("h3",{style:{gridColumn:"1/4",fontSize:"2em",color:"var(--text-accent)",marginBottom:"10px"},children:"Visited Locations"}),Object(O.jsx)(d.a,{className:p.a.map,children:Object(O.jsx)(l.d,{className:p.a["visible-map"],theme:t,drinks:_})})]})})},_=Object(n.memo)(m),x=a(302),f=a(439),v=a.n(f),k=function(e){var t=e.theme,a=Object(s.a)().t,c=Object(x.a)().drinks,r=Object(n.useContext)(b.a),o=Object(i.a)(r,1)[0],j=Object(n.useState)(JSON.parse(localStorage.getItem("metrics"))),u=Object(i.a)(j,1)[0];return Object(O.jsxs)("div",{className:v.a.container,children:[Object(O.jsxs)("main",{children:[Object(O.jsx)("header",{children:Object(O.jsx)("h1",{className:v.a.title,children:a("dashboard")})}),Object(O.jsxs)("div",{className:v.a.content,children:[Object(O.jsx)(l.d,{className:v.a.map,theme:t,drinks:c}),Object(O.jsx)(d.a,{className:v.a.heatmap,title:"drink frequency",children:Object(O.jsx)(l.c,{data:u.d})}),Object(O.jsxs)("div",{className:v.a.stats,children:[Object(O.jsxs)(d.a,{className:v.a.budget,children:[Object(O.jsx)("p",{children:"This is how much you\u2019ve spent on drinks so far:"}),Object(O.jsxs)("h2",{className:v.a.bw,children:["$",u.ctc>=100?(u.ctc/100).toFixed(2):parseInt(u.ctc/100)]})]}),Object(O.jsxs)(d.a,{className:v.a.total,children:[Object(O.jsx)("h2",{className:v.a.bw,children:u.td}),Object(O.jsxs)("p",{children:["drink",1===u.td?"":"s"," this month"]})]})]}),Object(O.jsx)(d.a,{className:v.a.xy,children:Object(O.jsx)("h3",{style:{display:"grid",color:"var(--text-secondary)",fontSize:"3em",textAlign:"center"},children:"COMING SOON"})})]})]}),Object(O.jsx)("aside",{className:v.a.sidebar,children:Object(O.jsxs)("div",{className:v.a["aside-container"],children:[Object(O.jsx)(d.a,{className:v.a.search,title:"monthly budget",children:Object(O.jsx)(l.a,{budget:o.profile.budget,spent:u.tc,theme:t})}),Object(O.jsxs)(d.a,{className:v.a.search,children:[Object(O.jsx)("h2",{children:"Search"}),Object(O.jsx)("span",{children:"Search your past uploads"}),Object(O.jsx)(d.g,{data:c,Result:function(e){var t=e.item;return Object(O.jsx)(l.b,{data:t})}})]}),Object(O.jsx)(d.a,{className:v.a.recent,title:"recent purchases",children:c.slice(0,5).map((function(e){return Object(O.jsx)(l.b,{data:e},e.id)}))})]})})]})},N=Object(n.memo)(k),g=function(e){var t=e.theme;return"phone"===Object(c.a)()?Object(O.jsx)(_,{theme:t}):Object(O.jsx)(N,{theme:t})},D=Object(n.memo)(g);t.default=D}}]);
//# sourceMappingURL=7.52889569.chunk.js.map