(this["webpackJsonpboba-watch"]=this["webpackJsonpboba-watch"]||[]).push([[11],{281:function(e,t,n){"use strict";var c=n(9),a=n(1);t.a=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)([]),s=Object(c.a)(r,2),i=s[0],u=s[1],l=Object(a.useCallback)((function(){o(JSON.parse(localStorage.getItem("drinkids")))}),[]);return Object(a.useEffect)(l,[l]),Object(a.useEffect)((function(){u(n.map((function(e){return JSON.parse(localStorage.getItem(e))})))}),[n]),{drinkids:n,drinks:i,update:l}}},282:function(e,t,n){"use strict";var c=n(8),a=n(9),o=n(1);t.a=function(){var e=Object(o.useState)({}),t=Object(a.a)(e,2),n=t[0],r=t[1],s=Object(o.useState)(null),i=Object(a.a)(s,2),u=i[0],l=i[1],d=function(e){l(e.message)},f=function(e){var t=e.coords,n=e.timestamp;r({accuracy:t.accuracy,alt:t.altitude,altitudeAccuracy:t.altitudeAccuracy,heading:t.heading,lat:t.latitude,lng:t.longitude,timestamp:n})};return Object(o.useEffect)((function(){navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(f,d,{}):l("Geolocation is not supported")}),[]),Object(c.a)(Object(c.a)({},n),{},{error:u})}},283:function(e,t,n){"use strict";var c=n(1);t.a=function(){return{getLocationsNearby:Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c="https://us-central1-boba-watch-firebase.cloudfunctions.net/locator";fetch(c+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(n)}),[]),getLocationsByText:Object(c.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},c="https://us-central1-boba-watch-firebase.cloudfunctions.net/nearbyLocations";fetch(c+"?"+new URLSearchParams(e).toString()).then((function(e){return e.json()})).then(t).catch(n)}),[])}}},284:function(e,t,n){"use strict";var c=n(9),a=n(1),o=n(11),r=n(43),s=n(30),i=n(47);t.a=function(e){var t=Object(a.useState)(Object(i.c)()),n=Object(c.a)(t,2),u=n[0],l=n[1],d=Object(a.useContext)(s.a),f=Object(c.a)(d,1)[0];return Object(a.useEffect)((function(){if(void 0===e||f.uid===e)return l(JSON.parse(localStorage.getItem("metrics")));l({}),o.b.collection("users/".concat(e,"/user")).doc("stats").get().then((function(e){l(e.data())})).catch(r.a)}),[e,f.uid]),u}},291:function(e,t,n){e.exports={container:"Listing_container__15GQ1",center:"Listing_center__17arw",distance:"Listing_distance__3MU9m",address:"Listing_address__3UQFM"}},292:function(e,t,n){"use strict";n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return a.a})),n.d(t,"c",(function(){return o.a}));n(92);var c=n(34),a=n(281),o=n(283);n(282),n(9),n(1),n(94),n(284),n(93)},327:function(e,t,n){e.exports={button:"SearchAreaButton_button__2rtPN"}},328:function(e,t,n){e.exports={popup:"StoreMarker_popup__wTD9d"}},335:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return _})),n.d(t,"e",(function(){return C}));var c=n(1),a=n(279),o=n(40),r=n(291),s=n.n(r),i=n(2),u=function(e){var t,n=e.data,r=e.selected,u=e.setCenter,l=Object(a.a)().t,d=n.venue.id,f=Object(c.useRef)(null);return Object(c.useEffect)((function(){r===d&&f.current.scrollIntoView({behavior:"smooth"})}),[r,d]),Object(i.jsxs)(o.a,{className:s.a.container,forwardedref:f,children:[Object(i.jsx)("h3",{children:n.venue.name}),Object(i.jsxs)("p",{className:s.a.distance,children:[Object(i.jsx)("span",{children:(t=n.venue.location.distance,t>1e3?(t/1e3).toFixed(2)+l(" km"):t+l(" meters"))})," ",l("from search pin")]}),Object(i.jsx)("p",{className:s.a.address,children:n.venue.location.formattedAddress.join(", ")}),Object(i.jsx)("span",{className:s.a.center,onClick:function(){u([n.venue.location.lat,n.venue.location.lng])},children:l("center on map")})]})},l=Object(c.memo)(u),d=function(){return Object(i.jsxs)(o.a,{className:s.a.container,children:[Object(i.jsx)("h3",{children:"no places nearby :("}),Object(i.jsx)("p",{className:s.a.distance,children:"We can't seem to find any boba places near you. Try searching a different part of the map."})]})},f=function(){return Object(i.jsxs)(o.a,{className:s.a.container,children:[Object(i.jsx)("h3",{children:"Loading...."}),Object(i.jsxs)("p",{className:s.a.distance,children:["Trying to find places near you. If this is taking too long, check your internet and try again.",Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),"Make sure you have your location enabled otherwise you will need to manually search"]})]})},b=Object(c.memo)(f),j=l,p=n(356),h=n(18),O=n(292),m=n(327),v=n.n(m),g=function(e){var t=e.className,n=e.position,a=e.setStores,o=e.filters,r=Object(p.a)(),s=Object(O.c)().getLocationsNearby,u=Object(c.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"map";switch(t){case"user":e={lat:n[0],lng:n[1]};break;case"map":default:e=r.getCenter()}var c={lat:e.lat,lng:e.lng,open:o.openNow?"true":"false",coffee:o.coffee?"true":"false"};a(null),s(c,(function(e){a(e.response.groups[0].items)}),(function(e){console.error("ERROR:",e),a([])}))}),[r,n,a,o,s]);return Object(c.useEffect)((function(){n&&u("user")}),[n,u]),Object(i.jsx)("button",{className:Object(h.a)(v.a.button,t),onClick:u,children:"Search this area"})},_=Object(c.memo)(g),x=n(509),S=n(355),y=n(52),N=n(328),w=n.n(N),k=function(e){var t=e.data,n=e.setCenter,c=e.setSelected,o=Object(a.a)().t,r=t.venue.location;return Object(i.jsx)(x.a,{center:[r.lat,r.lng],radius:10,fill:!0,weight:1,color:"#F68080",fillColor:"#F68080",fillOpacity:"0.5",eventHandlers:{click:function(){n([r.lat,r.lng]),c(t.venue.id)}},children:Object(i.jsx)(S.a,{children:Object(i.jsxs)("div",{className:w.a.popup,children:[Object(i.jsx)("h3",{children:t.venue.name}),Object(i.jsx)("span",{children:t.venue.location.address}),Object(i.jsx)(y.b,{to:"/add",state:{address:t.venue.location,location:t.venue.name},children:o("Add drink for this location")})]})})})},C=Object(c.memo)(k)},355:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c=n(497),a=n(295),o=n(1),r=Object(c.a)((function(e,t){return{instance:new a.Popup(e,t.overlayContainer),context:t}}),(function(e,t,n,c){var a=n.onClose,r=n.onOpen,s=n.position;Object(o.useEffect)((function(){var n=e.instance;function o(e){e.popup===n&&(n.update(),c(!0),null==r||r())}function i(e){e.popup===n&&(c(!1),null==a||a())}return t.map.on({popupopen:o,popupclose:i}),null==t.overlayContainer?(null!=s&&n.setLatLng(s),n.openOn(t.map)):t.overlayContainer.bindPopup(n),function(){t.map.off({popupopen:o,popupclose:i}),t.map.removeLayer(n)}}),[e,t,c,a,r,s])}))},356:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(304);n(1);function a(){return Object(c.c)().map}},456:function(e,t,n){e.exports={container:"Filter_container__3NBKK"}},457:function(e,t,n){"use strict";var c=n(74),a=n(76);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1)),r=(0,c(n(75)).default)(o.createElement("path",{d:"M3 18c0 .55.45 1 1 1h5v-2H4c-.55 0-1 .45-1 1zM3 6c0 .55.45 1 1 1h9V5H4c-.55 0-1 .45-1 1zm10 14v-1h7c.55 0 1-.45 1-1s-.45-1-1-1h-7v-1c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1s1-.45 1-1zM7 10v1H4c-.55 0-1 .45-1 1s.45 1 1 1h3v1c0 .55.45 1 1 1s1-.45 1-1v-4c0-.55-.45-1-1-1s-1 .45-1 1zm14 2c0-.55-.45-1-1-1h-9v2h9c.55 0 1-.45 1-1zm-5-3c.55 0 1-.45 1-1V7h3c.55 0 1-.45 1-1s-.45-1-1-1h-3V4c0-.55-.45-1-1-1s-1 .45-1 1v4c0 .55.45 1 1 1z"}),"TuneRounded");t.default=r},458:function(e,t,n){e.exports={container:"MobileLocator_container__3rr6S",map:"MobileLocator_map__2__z_","search-area--btn":"MobileLocator_search-area--btn__EwX6_"}},500:function(e,t,n){"use strict";n.r(t);var c=n(9),a=n(1),o=n(40),r=n(335),s=(n(457),n(456),n(2)),i=n(458),u=n.n(i),l=function(e){var t=e.theme,n=Object(a.useState)(null),i=Object(c.a)(n,2),l=i[0],d=i[1],f=Object(a.useState)(null),b=Object(c.a)(f,2),j=(b[0],b[1]),p=Object(a.useState)(null),h=Object(c.a)(p,2),O=h[0],m=h[1],v=Object(a.useState)({openNow:!1,coffee:!1}),g=Object(c.a)(v,2),_=g[0];g[1];return Object(s.jsx)("div",{className:u.a.container,children:Object(s.jsx)(o.d,{className:u.a.map,zoom:12,center:O,setCenter:m,theme:t,zoomControl:!1,children:function(e){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(r.d,{className:u.a["search-area--btn"],position:e,setStores:d,filters:_}),l&&l.map((function(e){return Object(s.jsx)(r.e,{data:e,setSelected:j,setCenter:m},e.venue.id)}))]})}})})},d=Object(a.memo)(l);t.default=d}}]);
//# sourceMappingURL=11.0e6d1a5a.chunk.js.map