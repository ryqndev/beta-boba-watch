(this["webpackJsonpboba-watch"]=this["webpackJsonpboba-watch"]||[]).push([[4],{25:function(e,t,n){"use strict";var a=n(1),o=Object(a.createContext)();t.a=o},28:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(8),o=function(){a.a.logEvent("login")},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown";a.a.logEvent("page_view",{page_title:e,page_path:e})},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"N/A";a.a.logEvent("exception",{description:e})}},34:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return s}));var a=n(14),o=n(15),r=function(e){var t={td:e.ctd,tc:e.ctc,ad:e.cad,d:e.d};return e.d=Array(7).fill(Array(24).fill(0)),[Object(o.a)({},e),t]},i=function(e,t){return Object(o.a)(Object(o.a)({},e),{},{ctd:t.td,ctc:t.tc,cad:t.ad,d:t.d})};function c(){for(var e={td:0,tc:0,ad:0,ctd:0,ctc:0,cad:0,d:Array(7)},t=0;t<7;t++)e.d[t]=Array(24).fill(0);return e}function l(){var e=JSON.parse(localStorage.getItem("drinkids")),t=c(),n=c(),a=new Date,o=a.getMonth(),r=a.getFullYear();e.forEach((function(e){try{var a=JSON.parse(localStorage.getItem(e)),i=new Date(a.date);i.getMonth()===o&&i.getFullYear()===r&&f(a,t),f(a,n)}catch(c){console.log("error",c),console.log(e)}}));var l=i(t,n);return localStorage.setItem("metrics",JSON.stringify(l)),l}function s(e){var t=JSON.parse(localStorage.getItem("drinkids")),n=r(JSON.parse(localStorage.getItem("metrics"))),o=Object(a.a)(n,2),c=o[0],l=o[1],s=JSON.parse(localStorage.getItem(e)),u=new Date,d=u.getMonth(),g=u.getFullYear(),h=new Date(s.date);h.getMonth()===d&&h.getFullYear()===g&&f(s,c,!1),f(s,l,!1);var b=t.indexOf(e);b>-1&&t.splice(b,1);var m=i(c,l);return localStorage.removeItem(e),localStorage.setItem("drinkids",JSON.stringify(t)),localStorage.setItem("metrics",JSON.stringify(m)),m}function u(e,t,n,a,o){if(o<=a)return n.splice(t<new Date(JSON.parse(localStorage.getItem(n[a])).date)?a+1:a,0,e);var r=parseInt((o-a)/2+a),i=new Date(JSON.parse(localStorage.getItem(n[r])).date);return t.getTime()===i.getTime()?n.splice(r+1,0,e):t<i?u(e,t,n,r+1,o):u(e,t,n,a,r-1)}function d(e,t){var n=JSON.parse(localStorage.getItem("drinkids")),o=r(JSON.parse(localStorage.getItem("metrics"))),c=Object(a.a)(o,2),l=c[0],s=c[1],d=new Date,g=d.getMonth(),h=d.getFullYear(),b=new Date(e.date);n.length?u(t,b,n,0,n.length-1):n.push(t),b.getMonth()===g&&b.getFullYear()===h&&f(e,l),f(e,s);var m=i(l,s);return localStorage.setItem(t,JSON.stringify(e)),localStorage.setItem("drinkids",JSON.stringify(n)),localStorage.setItem("metrics",JSON.stringify(m)),m}function f(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{var a=n?1:-1;t.td+=a,t.tc+=parseFloat(e.price)*a,t.ad=parseFloat(t.tc)/parseFloat(t.td);var o=new Date(e.date);t.d[o.getDay()][o.getHours()-1]+=a}catch(r){console.error("BROKE: ",r),console.error(e)}}},40:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"h",(function(){return O})),n.d(t,"i",(function(){return p}));var a=n(11),o=n.n(a),r=n(21),i=n(9),c=n.n(i),l=n(5),s=n(28),u="ryanqyang@gmail.com",d=function(e){Object(s.a)(e),console.log("Please copy this error and send to ".concat(u),e),c.a.fire(l.a.t("Oops..."),l.a.t("Couldn't delete your drink. Try again later!"),"error")},f=function(e){Object(s.a)(e),console.log("Please copy this error and send to ".concat(u),e),c.a.fire(l.a.t("Oops..."),JSON.stringify(e),"error")},g=function(){c.a.fire(l.a.t("Link Copied!"),l.a.t(""),"success")},h=function(){c.a.fire(l.a.t("Success!"),l.a.t("Your settings have been updated"),"success")},b=function(){c.a.fire(l.a.t("Saved!"),l.a.t("You can now autofill your next purchase with these drink details."),"success")},m=function(){c.a.fire(l.a.t("Deleted!"),l.a.t("Deleted this saved entry."),"success")},v=function(){c.a.fire(l.a.t("Deleted!"),l.a.t("Drink has been deleted"),"success")},p=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.fire({title:l.a.t("Download Data"),text:l.a.t("Would you like to download all your drink data? (in JSON format)"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l.a.t("Yes, download ALL of it!")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.a.fire({title:l.a.t("Are you sure?"),text:l.a.t("Once you delete this you can't get it back!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:l.a.t("Yes, delete it!")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},43:function(e,t,n){"use strict";var a=n(14),o=n(1),r=n(7),i=n(25);t.a=function(){var e=Object(r.g)(),t=Object(o.useContext)(i.a),n=Object(a.a)(t,1)[0];return Object(o.useEffect)((function(){n||e("/login")}),[n,e]),{user:n}}},44:function(e,t,n){"use strict";var a=n(14),o=n(1),r=n(57),i=n(58),c=[r,i],l=[{value:0,label:"default"},{value:1,label:"dark"}],s={default:0,dark:1};t.a=function(){var e=function(){var e;return null!==(e=localStorage.getItem("theme"))&&void 0!==e?e:"default"},t=Object(o.useState)((function(){return e()})),n=Object(a.a)(t,2),r=n[0],i=n[1];return Object(o.useEffect)((function(){var e,t;localStorage.setItem("theme",r);var n=null!==(e=null===(t=c[s[r]])||void 0===t?void 0:t.themeStyles)&&void 0!==e?e:[];for(var a in n)document.documentElement.style.setProperty(a,n[a])}),[r]),{theme:r,getTheme:e,setTheme:i,THEMES:s,THEME_SELECT_DEFAULT_VALUE:0,THEME_SELECT_OPTIONS:l}}},45:function(e,t,n){"use strict";var a=n(14),o=n(1),r=n(7),i=n(25);t.a=function(){var e=Object(r.g)(),t=Object(o.useContext)(i.a),n=Object(a.a)(t,1)[0];Object(o.useEffect)((function(){n&&e("/")}),[n,e])}},57:function(e){e.exports=JSON.parse('{"themeName":"Light","themeStyles":{"--bg-primary":"white","--bg-secondary":"white","--bg-border":"#FFDCDC","--bg-blend":"linear-gradient(180deg, #FC8A8A 0%, #FFD3B3 100%)","--dash-blend":"#FFD3B3","--avatar-border":"white","--text-primary":"white","--text-secondary":"black","--text-light":"#FFC9C2","--text-accent":"#F68080","--btn-bg":"#F68080","--btn-text":"white","--nav-bg":"#FFAFA4","--nav-text":"white","--blog-text-primary":"#F68080","--blog-bg-secondary":"#F68080","--blog-accent":"#F68080","--blog-bg-primary":"#FFAFA4","--logout-btn":"#FF0000","--history-summary":"black","--add-header":"#FFF1EF","--dash-bg-secondary":"#F68080","--dash-text-secondary":"#FFFFFF","--editor-background":"#FFFFFF","--table-header--text":"#FFFFFF","--overlay-background":"#44444466","--autofill-title":"#f68080","--autofill-text":"#ffffff"}}')},58:function(e){e.exports=JSON.parse('{"themeName":"Dark","themeStyles":{"--bg-primary":"#161C26","--bg-secondary":"#161C26","--bg-border":"#7F91A8","--bg-blend":"linear-gradient(180deg, #050505 0%, #050505 100%)","--dash-blend":"#151515","--avatar-border":"#151515","--text-primary":"white","--text-secondary":"white","--text-light":"#151515","--text-accent":"#7F91A8","--btn-bg":"#F68080","--btn-text":"#151515","--nav-bg":"#050505","--nav-text":"#7F91A8","--blog-text-primary":"white","--blog-bg-secondary":"#101015","--blog-accent":"#7F91A8","--blog-bg-primary":"#050505","--logout-btn":"#7F91A8","--history-summary":"#7F91A8","--add-header":"#7F91A8","--dash-bg-secondary":"#0b0b0b","--dash-text-secondary":"#FFDCDC","--editor-background":"#101015","--table-header--text":"#F68080","--overlay-background":"#000000aa","--autofill-title":"#ffffff","--autofill-text":"#7F91A8"}}')},60:function(e){e.exports=JSON.parse('{"translation":{"$":"$","MONTHLY LIMIT":"MONTHLY LIMIT","REMAINING":"REMAINING","Monthly Spending":"Monthly Spending","This is how much you\u2019ve spent on drinks so far":"This is how much you\u2019ve spent on drinks so far","to your max number of drinks this month":"to your max number of drinks this month","drinks this month":"drinks this month","Morning Purchases":"Morning Purchases","Afternoon Purchases":"Afternoon Purchases","# of purchases":"# of purchases","User Settings":"User Settings","Monthly Spending Limit":"Monthly Spending Limit","Max of drinks / month":"Max of drinks / month","Share Profile":"Share Profile","LOGOUT":"LOGOUT","UPDATE":"UPDATE","Add a purchase":"Add a purchase","Location":"Location","Drink Name":"Drink Name","Price":"Price","Date":"Date","Description":"Description","ADD":"ADD","EDIT":"EDIT","Please enter a valid price to add drink":"Please enter a valid price to add drink","No drinks this month":"No drinks this month","Add a drink to start!":"Add a drink to start!","Monthly Total":"Monthly Total","Overall Spending":"Overall Spending","Complete Total":"Complete Total","on":"on","DELETE":"DELETE","EXPLORE":"EXPLORE","PUBLIC":"PUBLIC","FAVES":"FAVES"}}')},79:function(e,t,n){},8:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return c}));n(11),n(21);var a=n(3);n.d(t,"c",(function(){return a.a}));n(84),n(52),n(83),n(85);var o=n(40),r=n(37);n(87),n(86);a.a.initializeApp({apiKey:"AIzaSyBePNJQYVteyh1Ll9fqnXbXc-S8fmJlbTQ",authDomain:"boba-watch-firebase.firebaseapp.com",databaseURL:"https://boba-watch-firebase.firebaseio.com",projectId:"boba-watch-firebase",storageBucket:"boba-watch-firebase.appspot.com",messagingSenderId:"674375234614",appId:"1:674375234614:web:fdaf98c291204b9c",measurementId:"G-C2DYVHCWDR"});var i,c=a.a.analytics(),l=a.a.storage(),s=r.a.AuthUI.getInstance()||new r.a.AuthUI(a.a.auth());i=a.a.firestore();var u=function(){a.a.auth().signOut().then((function(){c.logEvent("logout");var e=localStorage.getItem("theme");localStorage.clear(),localStorage.setItem("theme",e)})).catch(o.c)}},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(41),r=n.n(o),i=n(29),c=n(15),l=n(39),s=n(14),u=n(7),d=n(8),f=n(28),g={budget:1e4,limit:15,sharing:!1},h={ad:0,cad:0,ctc:0,ctd:0,d:"[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]",fn:"Who dis?",tc:0,td:0},b=n(34),m=function(e,t){localStorage.setItem("autofill","[]"),localStorage.setItem("drinkids","[]"),localStorage.setItem("metrics",JSON.stringify(Object(b.c)())),e.profile=Object(c.a)({},g);var n=d.b.batch();return n.set(d.b.collection("users/".concat(e.uid,"/user")).doc("stats"),h),n.set(d.b.collection("users/".concat(e.uid,"/blog")).doc("user"),{name:null===e||void 0===e?void 0:e.displayName,profile:null===e||void 0===e?void 0:e.photoURL},{merge:!0}),n.set(d.b.collection("users/".concat(e.uid,"/user")).doc("profile"),g),n.commit().then((function(){t(e)}))},v=function(e,t){Promise.all([d.b.collection("users/".concat(e.uid,"/user")).doc("autofill").get(),d.b.collection("users/".concat(e.uid,"/user")).doc("profile").get(),d.b.collection("users/".concat(e.uid,"/drinks")).orderBy("drink.date","desc").get()]).then((function(n){var a,o,r,i,l=Object(s.a)(n,3),u=l[0],f=l[1],g=l[2],h=[];g.forEach((function(e){var t=e.data();localStorage.setItem(e.id,JSON.stringify(Object(c.a)(Object(c.a)({id:e.id},t.drink),{},{edited:null===t||void 0===t?void 0:t.edited,created:null===t||void 0===t?void 0:t.created}))),h.push(e.id)})),localStorage.setItem("autofill",null!==(a=null===u||void 0===u||null===(o=u.data())||void 0===o?void 0:o.data)&&void 0!==a?a:"[]"),localStorage.setItem("drinkids",JSON.stringify(h)),Object(b.d)(),e.profile=Object(c.a)({sharing:null!==(r=null!==(i=null===f||void 0===f?void 0:f.sharing)&&void 0!==i?i:null===f||void 0===f?void 0:f.public)&&void 0!==r&&r},f.data()),d.b.collection("users/".concat(e.uid,"/blog")).doc("user").set({name:null===e||void 0===e?void 0:e.displayName,profile:null===e||void 0===e?void 0:e.photoURL},{merge:!0}).finally((function(){t(e)}))}))},p=function(e,t){Promise.all([d.b.collection("users/".concat(e.uid,"/user")).doc("autofill").get(),d.b.collection("users/".concat(e.uid,"/user")).doc("profile").get()]).then((function(n){var a,o,r,i,l=Object(s.a)(n,2),u=l[0],d=l[1];Object(b.d)(),localStorage.setItem("autofill",null!==(a=null===u||void 0===u||null===(o=u.data())||void 0===o?void 0:o.data)&&void 0!==a?a:"[]"),e.profile=Object(c.a)({sharing:null!==(r=null!==(i=null===d||void 0===d?void 0:d.sharing)&&void 0!==i?i:null===d||void 0===d?void 0:d.public)&&void 0!==r&&r},d.data()),t(e)}))},O=function(e){d.c.auth().onAuthStateChanged((function(t){var n,a,o,r,i;return t?(Object(f.b)(),(null===(n=t={displayName:(i=t).displayName,metadata:i.metadata,photoURL:i.photoURL,email:i.email,emailVerified:i.emailVerified,uid:i.uid,isAnonymous:i.isAnonymous,providerData:i.providerData})||void 0===n||null===(a=n.metadata)||void 0===a?void 0:a.creationTime)===(null===(o=t)||void 0===o||null===(r=o.metadata)||void 0===r?void 0:r.lastSignInTime)?m(t,e):localStorage.getItem("drinkids")?void p(t,e):v(t,e)):e(t)}))},j=n(25),y=n(43),S=n(44),w=n(45),x=(n(77),n(6)),F={fontFamily:"Poppins",fontWeight:700,color:"white",fontSize:44,marginBottom:20},k=function(){return Object(w.a)(),Object(a.useEffect)((function(){d.f.start("#auth-container",{signInSuccessUrl:window.location.href,signInFlow:"popup",signInOptions:[d.c.auth.GoogleAuthProvider.PROVIDER_ID,d.c.auth.FacebookAuthProvider.PROVIDER_ID]})})),Object(x.jsxs)("div",{className:"login-page",children:[Object(x.jsx)("div",{className:"login-logo"}),Object(x.jsx)("h1",{style:F,children:"boba watch"}),Object(x.jsx)("div",{id:"auth-container"})]})},I=["theme"],A=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(6)]).then(n.bind(null,484))})),E=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(9)]).then(n.bind(null,487))})),D=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(12),n.e(8)]).then(n.bind(null,482))})),N=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,485))})),P=Object(a.lazy)((function(){return n.e(14).then(n.bind(null,491))})),T=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,105))})),L=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,106))})),C=function(){var e=Object(y.a)().user,t=Object(S.a)(),n=t.theme,o=Object(l.a)(t,I);return e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(L,{theme:Object(c.a)({theme:n},o)}),Object(x.jsx)(a.Suspense,{fallback:Object(x.jsx)("div",{}),children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{path:"/",element:Object(x.jsx)(E,{theme:n})}),Object(x.jsx)(u.a,{path:"history",element:Object(x.jsx)(A,{theme:n})}),Object(x.jsx)(u.a,{path:"add",element:Object(x.jsx)(D,{})}),Object(x.jsx)(u.a,{path:"edit/:id",element:Object(x.jsx)(D,{})}),Object(x.jsx)(u.a,{path:"map",element:Object(x.jsx)(N,{theme:n})}),Object(x.jsx)(u.a,{path:"blog/:userid",element:Object(x.jsx)(P,{})})]})}),Object(x.jsx)(T,{})]}):Object(x.jsx)("div",{children:"Loading..."})},J=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){O(o)}),[]),Object(x.jsx)(j.a.Provider,{value:[n,o],children:Object(x.jsx)(a.Suspense,{fallback:Object(x.jsx)("div",{}),children:Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{path:"/login",element:Object(x.jsx)(k,{})}),Object(x.jsx)(u.a,{path:"*",element:Object(x.jsx)(C,{})})]})})})},M=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function U(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}window.isUpdateAvailable=new Promise((function(e,t){"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then((function(t){t.onupdatefound=function(){var n=t.installing;n.onstatechange=function(){switch(n.state){case"installed":navigator.serviceWorker.controller?e(!0):e(!1)}}}})).catch((function(e){return console.error("[SW ERROR]",e)}))}));n(79),n(80),n(81);var R=n(5),B=n(59),W=n(90),Y={en:n(60)};R.a.use(B.a).use(W.e).init({resources:Y,detection:{order:["localStorage","navigator"],lookupLocalStorage:"i18n",caches:["localStorage"],checkWhitelist:!0},lng:"en",fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});R.a;r.a.render(Object(x.jsx)(i.a,{basename:"",children:Object(x.jsx)(J,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");M?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):U(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):U(t,e)}))}}()}},[[82,5,7]]]);
//# sourceMappingURL=main.05b447bd.chunk.js.map