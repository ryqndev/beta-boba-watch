(this["webpackJsonpboba-watch"]=this["webpackJsonpboba-watch"]||[]).push([[0],{103:function(e){e.exports=JSON.parse('{"data":[{"img":"theme.png","title":"Dark Mode","path":["user","theme","[SELECT dark]"],"desc":"You can now search through your history of drinks!. The search feature will be able to match description, location, name, and price. (date search funcitonality currently in the works!)"},{"img":"search.png","title":"Search","path":["history","Search..."],"desc":"You can now search through your history of drinks!. The search feature will be able to match description, location, name, and price. (date search funcitonality currently in the works!)"},{"img":"edit.png","title":"Edit","path":["history","[any drink]","EDIT"],"desc":"You can now edit a drink entry without having to delete and create a new one. Just click the edit button after selecting a drink entry."},{"img":"publish.png","title":"Publish","path":["history","[any drink]","PUBLISH"],"desc":"Start your own blog by publishing your drink entries for the world to see. Note: privating your profile will only keep your profile hidden and people may still be able to see your posts on their feed."},{"img":"rating.png","title":"Rating","path":["add","RATING"],"desc":"You can now rate your drinks with a 1-5 star rating system!"},{"img":"save.png","title":"Save","path":["add","[fill drink detail]","SAVE"],"desc":"Find yourself adding the same drinks over and over again? Now, you can fill out the add page and click \'SAVE\' to save drinks to your autofill list."},{"img":"autofill.png","title":"Autofill","path":["add","Autofill with saved entry","[SELECT]"],"desc":"After saving drinks to your autofilled list, you can quickly fill out the form by selecting it from the dropdown menu. Your autofill list will save the following entries: [location, drink name, price, rating, description]"},{"img":"feed.png","title":"Feed","path":["feed"],"desc":"All drinks and posts that anyone choose to publish will be displayed through the global feed. You can \'like\' posts that you find interesting and they will be saved in your \'faves\' tab unless deleted by the creator"},{"img":"profiles.png","title":"Profiles","path":["feed","[click on user\'s avatar]"],"desc":"You can view any person\'s profile by clicking on their avatar. "},{"img":"manage.png","title":"Manage your Profile","path":["blog","[location icon or bio]"],"desc":"You can edit your profile location or bio anytime by just clicking on them. Here, you can also view and manage your public posts."},{"title":"Moderation","desc":"We reserve the right to remove you from the platform. Please exercise common sense when posting things publicly. If you are found to be posting material we deem inappropriate or irrelevant, you will be banned from posting."}]}')},104:function(e,t,a){e.exports=a.p+"static/media/logo-shadow.0824830a.svg"},118:function(e,t,a){},133:function(e){e.exports=JSON.parse('{"themeName":"Light","themeStyles":{"--bg-primary":"white","--bg-secondary":"white","--bg-border":"#FFDCDC","--bg-blend":"linear-gradient(180deg, #FC8A8A 0%, #FFD3B3 100%)","--dash-blend":"#FFD3B3","--avatar-border":"white","--text-primary":"white","--text-secondary":"black","--text-light":"#FFC9C2","--text-accent":"#F68080","--btn-bg":"#F68080","--btn-text":"white","--nav-bg":"#FFAFA4","--nav-text":"white","--blog-text-primary":"#F68080","--blog-bg-secondary":"#F68080","--blog-accent":"#F68080","--blog-bg-primary":"#FFAFA4","--logout-btn":"#FF0000","--history-summary":"black","--add-header":"#FFF1EF","--dash-bg-secondary":"#F68080","--dash-text-secondary":"#FFFFFF"}}')},134:function(e){e.exports=JSON.parse('{"themeName":"Dark","themeStyles":{"--bg-primary":"#161C26","--bg-secondary":"#161C26","--bg-border":"#7F91A8","--bg-blend":"linear-gradient(180deg, #050505 0%, #050505 100%)","--dash-blend":"#151515","--avatar-border":"#151515","--text-primary":"white","--text-secondary":"white","--text-light":"#151515","--text-accent":"#7F91A8","--btn-bg":"#F68080","--btn-text":"#151515","--nav-bg":"#050505","--nav-text":"#7F91A8","--blog-text-primary":"white","--blog-bg-secondary":"#101015","--blog-accent":"#7F91A8","--blog-bg-primary":"#050505","--logout-btn":"#7F91A8","--history-summary":"#7F91A8","--add-header":"#7F91A8","--dash-bg-secondary":"#0b0b0b","--dash-text-secondary":"#FFDCDC"}}')},144:function(e){e.exports=JSON.parse('{"translation":{"$":"$","MONTHLY LIMIT":"MONTHLY LIMIT","REMAINING":"REMAINING","Monthly Spending":"Monthly Spending","This is how much you\u2019ve spent on drinks so far":"This is how much you\u2019ve spent on drinks so far","to your max number of drinks this month":"to your max number of drinks this month","drinks this month":"drinks this month","Morning Purchases":"Morning Purchases","Afternoon Purchases":"Afternoon Purchases","# of purchases":"# of purchases","User Settings":"User Settings","Monthly Spending Limit":"Monthly Spending Limit","Max of drinks / month":"Max of drinks / month","Share Profile":"Share Profile","LOGOUT":"LOGOUT","UPDATE":"UPDATE","Add a purchase":"Add a purchase","Location":"Location","Drink Name":"Drink Name","Price":"Price","Date":"Date","Description":"Description","ADD":"ADD","EDIT":"EDIT","Please enter a valid price to add drink":"Please enter a valid price to add drink","No drinks this month":"No drinks this month","Add a drink to start!":"Add a drink to start!","Monthly Total":"Monthly Total","Overall Spending":"Overall Spending","Complete Total":"Complete Total","on":"on","DELETE":"DELETE","EXPLORE":"EXPLORE","PUBLIC":"PUBLIC","FAVES":"FAVES"}}')},163:function(e,t,a){e.exports=a(250)},179:function(e,t,a){},180:function(e,t,a){},181:function(e,t,a){},182:function(e,t,a){},186:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},203:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){var n={"./autofill.png":212,"./edit.png":213,"./feed.png":214,"./manage.png":215,"./profiles.png":216,"./publish.png":217,"./rating.png":218,"./save.png":219,"./search.png":220,"./theme.png":221};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=211},212:function(e,t,a){e.exports=a.p+"static/media/autofill.85d9666b.png"},213:function(e,t,a){e.exports=a.p+"static/media/edit.d523bea9.png"},214:function(e,t,a){e.exports=a.p+"static/media/feed.eb218b0b.png"},215:function(e,t,a){e.exports=a.p+"static/media/manage.2da3077e.png"},216:function(e,t,a){e.exports=a.p+"static/media/profiles.93e705b0.png"},217:function(e,t,a){e.exports=a.p+"static/media/publish.81095bde.png"},218:function(e,t,a){e.exports=a.p+"static/media/rating.c15a9421.png"},219:function(e,t,a){e.exports=a.p+"static/media/save.bebf26fa.png"},220:function(e,t,a){e.exports=a.p+"static/media/search.56bf0450.png"},221:function(e,t,a){e.exports=a.p+"static/media/theme.930bbdf7.png"},222:function(e,t,a){},224:function(e,t,a){},225:function(e,t,a){},226:function(e,t,a){},240:function(e,t,a){},241:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},247:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),i=a(22),o=a(12),s=a(5),u=a(26),d=a(293);function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var a=parseInt(e/100);return isNaN(a)?"---":a}var n=Number(e/100).toFixed(2);return isNaN(n)?"---":n}var p=a(28),f=a(38),h=(a(179),function(e){var t=e.className,a=e.children,n=Object(f.a)(e,["className","children"]);return r.a.createElement("div",Object.assign({className:"card ".concat(t)},n),a)}),b=(a(180),function(e){var t=e.className,a=void 0===t?"":t,n=e.children,c=e.open,l=Object(f.a)(e,["className","children","open"]);return r.a.createElement("div",Object.assign({className:"collapse ".concat(c?"open":""," ").concat(a)},l),n)}),v=a(289),g=(a(181),function(e){var t=e.open,a=e.setOpen,c=e.children,l=Object(n.useRef)(null);return r.a.createElement(v.a,{in:t,timeout:100,classNames:"fade-quick"},r.a.createElement("div",{className:"modal-backdrop "+(t?"open":""),onClick:function(e){l.current&&l.current===e.target&&a(!1)},ref:l},c))}),E=(a(182),function(e){var t=e.value,a=e.id,n=e.label,c=e.autoFocus;return r.a.createElement("span",{className:"text-input"+(0===t.length?"":" input--filled")},r.a.createElement("input",Object.assign({},e,{autoComplete:"off",autoFocus:null!==c&&void 0!==c&&c,name:a})),r.a.createElement("label",{htmlFor:a},r.a.createElement("span",null,n)))}),O=a(120),y=a(123),j=a.n(y),w=(a(186),a(13)),k=a.n(w),N=a(18),S=a(21),x=a.n(S),C=a(14),A=a(11),D=a.n(A),I=(a(113),a(114),a(251),a(252),a(98)),L=a(292),F=a(282);D.a.initializeApp({apiKey:"AIzaSyBePNJQYVteyh1Ll9fqnXbXc-S8fmJlbTQ",authDomain:"boba-watch-firebase.firebaseapp.com",databaseURL:"https://boba-watch-firebase.firebaseio.com",projectId:"boba-watch-firebase",storageBucket:"boba-watch-firebase.appspot.com",messagingSenderId:"674375234614",appId:"1:674375234614:web:fdaf98c291204b9c",measurementId:"G-C2DYVHCWDR"});var P,T=D.a.analytics(),M=I.a.AuthUI.getInstance()||new I.a.AuthUI(D.a.auth());(P=D.a.firestore()).enablePersistence().catch((function(e){console.error(e)}));var R=function(){D.a.auth().signOut().then((function(){T.logEvent("logout");var e=localStorage.getItem("theme");localStorage.clear(),localStorage.setItem("theme",e),window.location.reload()})).catch(H)};window.logout=R;var U=function(){var e=Object(N.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.collection("blogs").doc(t).delete());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(N.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.collection("users/".concat(t,"/blog")).doc("user").get());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(N.a)(k.a.mark((function e(t){var a,n,r=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:1,n=r.length>2&&void 0!==r[2]?r[2]:0,e.abrupt("return",P.collection("users/".concat(t,"/user/profile/liked")).orderBy("liked").startAfter(n).limit(a).get());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(N.a)(k.a.mark((function e(t,a,n,r){var c,l,i,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.edited,c=Object(f.a)(n,["edited"]),l=P.batch(),i=P.collection("users/".concat(t,"/user/profile/liked")).doc(a),s=D.a.firestore.FieldValue.increment(r?1:-1),l.update(P.collection("blogs").doc(a),{likes:s}),r?l.set(i,Object(o.a)({liked:D.a.firestore.FieldValue.serverTimestamp()},c)):l.delete(i),e.abrupt("return",l.commit());case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"N/A";T.logEvent("exception",{description:e})},H=function(e){Y(e),console.log("Please copy this error and send to ".concat("ryanqyang@gmail.com"),e),x.a.fire(C.a.t("Oops..."),JSON.stringify(e),"error")},V=function(){x.a.fire(C.a.t("Done!"),C.a.t("Your bio has been updated."),"success")},$=function(){x.a.fire(C.a.t("Done!"),C.a.t("Your public location has been changed."),"success")},q=function(){var e=Object(N.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.fire({title:C.a.t("Edit bio"),input:"textarea",inputPlaceholder:C.a.t("About me..."),inputAttributes:{maxLength:350}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(N.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.fire({title:C.a.t("Change location"),input:"text",inputPlaceholder:C.a.t("Where I am now..."),inputAttributes:{maxLength:20}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(N.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.a.fire({title:C.a.t("Are you sure?"),text:C.a.t("Once you delete this you can't get it back!"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:C.a.t("Yes, delete it!")}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e){var t=e.className,a=void 0===t?"":t,n=e.text;return r.a.createElement("div",{className:"clipboard ".concat(a)},r.a.createElement("div",{className:"clipboard-text",id:"copy-me"},n),r.a.createElement(O.CopyToClipboard,{text:n},r.a.createElement("button",{className:"clipboard-icon",onClick:function(){navigator.share?navigator.share({title:"My Boba Watch Profile",text:"Check out my boba spending!",url:n}).catch((function(e){})):x.a.fire(C.a.t("Link Copied!"),C.a.t(""),"success")}},r.a.createElement(j.a,{style:{fontSize:14}}))))},K=(a(199),a(146)),X=function(e){var t=e.placeholder,a=void 0===t?"How can I help you today?":t,c=e.data,l=void 0===c?[]:c,i=e.keys,o=void 0===i?[]:i,u=e.Result,d=Object(n.useState)(""),m=Object(s.a)(d,2),p=m[0],f=m[1],h=Object(n.useState)([]),b=Object(s.a)(h,2),v=b[0],g=b[1],E=new K.a(l,{includeMatches:!0,distance:100,maxPatternLength:30,minMatchCharLength:1,keys:o});return Object(n.useEffect)((function(){var e=E.search(p);g(e.slice(0,20))}),[p,l,l.length]),r.a.createElement("div",{className:"search-wrapper"},r.a.createElement("input",{type:"text",value:p,placeholder:a,onChange:function(e){f(e.target.value)}}),r.a.createElement("div",{className:"results"},v.map((function(e){return r.a.createElement(u,Object.assign({key:e.item.id},e))}))))},Q=a(73),Z=a.n(Q);function ee(){return(ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function te(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ae=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.7589 3.55723C10.6752 3.35482 10.4781 3.22276 10.2599 3.22276H7.35361L5.88318 0.274799C5.70012 -0.0915996 5.10018 -0.0915996 4.91712 0.274799L3.44615 3.22276H0.539864C0.321703 3.22276 0.124603 3.35482 0.0409023 3.55723C-0.0422579 3.7591 0.00364222 3.99236 0.158083 4.14661L2.63345 6.62751L1.64093 10.1102C1.57883 10.3283 1.65875 10.5621 1.84181 10.6958C2.02487 10.83 2.27165 10.8349 2.45957 10.7088L5.39988 8.74417L8.34019 10.7088C8.43145 10.7694 8.53567 10.7997 8.63989 10.7997C8.75167 10.7997 8.86345 10.765 8.95849 10.6958C9.14101 10.5621 9.22147 10.3283 9.15937 10.1102L8.16631 6.62751L10.6417 4.14661C10.7961 3.99236 10.8426 3.7591 10.7589 3.55723Z",stroke:"white"}),ne=function(e){var t=e.svgRef,a=e.title,n=te(e,["svgRef","title"]);return r.a.createElement("svg",ee({viewBox:"0 0 11 11",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,ae)},re=r.a.forwardRef((function(e,t){return r.a.createElement(ne,ee({svgRef:t},e))}));a.p;function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ie=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.7589 3.55723C10.6752 3.35482 10.4781 3.22276 10.2599 3.22276H7.35361L5.88318 0.274799C5.70012 -0.0915996 5.10018 -0.0915996 4.91712 0.274799L3.44615 3.22276H0.539864C0.321703 3.22276 0.124603 3.35482 0.0409023 3.55723C-0.0422579 3.7591 0.00364222 3.99236 0.158083 4.14661L2.63345 6.62751L1.64093 10.1102C1.57883 10.3283 1.65875 10.5621 1.84181 10.6958C2.02487 10.83 2.27165 10.8349 2.45957 10.7088L5.39988 8.74417L8.34019 10.7088C8.43145 10.7694 8.53567 10.7997 8.63989 10.7997C8.75167 10.7997 8.86345 10.765 8.95849 10.6958C9.14101 10.5621 9.22147 10.3283 9.15937 10.1102L8.16631 6.62751L10.6417 4.14661C10.7961 3.99236 10.8426 3.7591 10.7589 3.55723Z",fill:"white"}),oe=function(e){var t=e.svgRef,a=e.title,n=le(e,["svgRef","title"]);return r.a.createElement("svg",ce({viewBox:"0 0 11 11",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,ie)},se=r.a.forwardRef((function(e,t){return r.a.createElement(oe,ce({svgRef:t},e))})),ue=(a.p,a(200),function(e){var t=e.rating,a=e.setRating;return r.a.createElement("div",{className:"star-rating--wrapper"},r.a.createElement("div",{className:"rating-select"},r.a.createElement("p",null,"RATING :"),r.a.createElement(Z.a,{name:"rating",starCount:5,value:t,renderStarIcon:function(e,t){return e<=t?r.a.createElement(se,null):r.a.createElement(re,null)},onStarClick:function(e){a(e)},onStarHover:function(e){a(e)}})))}),de=a(127),me=a.n(de),pe=a(124),fe=a.n(pe),he=a(126),be=a.n(he),ve=a(125),ge=a.n(ve),Ee=a(128),Oe=a.n(Ee),ye=Object(n.createContext)(),je=(a(201),Object(i.h)((function(e){var t=e.history,a=Object(n.useState)(t.location.pathname),c=Object(s.a)(a,2),l=c[0],i=c[1],o=function(e){return e===l?" selected":""},d=Object(n.useContext)(ye),m=Object(s.a)(d,1)[0];return Object(n.useEffect)((function(){var e=t.location.pathname;i(e),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unknown";T.logEvent("page_view",{page_title:e,page_path:e})}(e)}),[t.location.pathname]),r.a.createElement("nav",null,r.a.createElement(u.b,{to:"/"},r.a.createElement("div",{className:"icon"+o("/")},r.a.createElement(fe.a,null),r.a.createElement("p",{className:"label"},"home"))),r.a.createElement(u.b,{to:"/history"},r.a.createElement("div",{className:"icon"+o("/history")},r.a.createElement(ge.a,null),r.a.createElement("p",{className:"label"},"history"))),r.a.createElement(u.b,{to:"/add"},r.a.createElement("div",{className:"add-icon"+o("/add")},r.a.createElement(be.a,{style:{fontSize:50}}))),r.a.createElement(u.b,{to:"/feed"},r.a.createElement("div",{className:"icon"+o("/feed")},r.a.createElement(me.a,null),r.a.createElement("p",{className:"label"},"feed"))),r.a.createElement(u.b,{to:"/blog/"+m.uid},r.a.createElement("div",{className:"icon"+o("/blog/"+m.uid)},r.a.createElement(Oe.a,null),r.a.createElement("p",{className:"label"},"blog"))))}))),we=(a(96),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),ke=["1 AM","2 AM","3 AM","4 AM","5 AM","6 AM","7 AM","8 AM","9 AM","10 AM","11 AM","12 AM","1 PM","2 PM","3 PM","4 PM","5 PM","6 PM","7 PM","8 PM","9 PM","10 PM","11 PM","12 PM"],Ne=function(e){var t=e.data,a=e.width;return r.a.createElement(h,{className:"daily-chart"},r.a.createElement(p.h,{xType:"ordinal",yType:"ordinal",margin:60,width:a,height:1.8*a},r.a.createElement(p.g,{orientation:"top"}),r.a.createElement(p.i,null),r.a.createElement(p.b,{colorType:"literal",style:{stroke:"white",strokeWidth:"0px",rectStyle:{rx:0,ry:0}},data:function(e){var t=[],a=[];e.forEach((function(e){a.push(Math.max.apply(null,e))}));var n=Math.max.apply(null,a);return e.forEach((function(e,a){e.forEach((function(e,r){t.push({x:we[a],y:ke[r],color:"rgba(246, 128, 128, ".concat(0===e?.1:e/n,")")})}))})),t}(t)})))},Se=(a(203),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),xe=function(e){var t=e.width,a=e.data,c=Object(d.a)().t,l=Object(n.useState)([]),i=Object(s.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)([]),f=Object(s.a)(m,2),b=f[0],v=f[1];return Object(n.useEffect)((function(){var e=[],t=[];a.forEach((function(a,n){var r=0,c=0;a.forEach((function(e,t){t>=11?c+=e:r+=e})),e.push({x:Se[n],y:r}),t.push({x:Se[n],y:c}),u(e),v(t)}))}),[a,u,v]),r.a.createElement(h,{className:"time-bar-graph--holder"},r.a.createElement(p.h,{width:t-40,height:300,stackBy:"y",xType:"ordinal"},r.a.createElement(p.f,null),r.a.createElement(p.c,null),r.a.createElement(p.g,null),r.a.createElement(p.i,{title:c("# of purchases")}),r.a.createElement(p.e,{color:"#FFACAC",data:o}),r.a.createElement(p.e,{color:"#FFDCDC",data:b})),r.a.createElement(p.a,{style:{textAlign:"center"},orientation:"horizontal",items:[{title:c("Morning Purchases"),color:"#FFACAC",strokeWidth:5},{title:c("Afternoon Purchases"),color:"#FFDCDC",strokeWidth:5}]}))},Ce=function(e){var t=e.spent,a=e.budget,n=e.width-45,c={size:0,color:"transparent",children:[{title:"Progress",size:t,color:"#f68080",children:[{title:"Padding",size:0,color:"transparent"}]},{title:"Until Limit",size:a-t,color:"#00000044"}]};return r.a.createElement("div",null,r.a.createElement(p.d,{height:n,width:n,data:c,padAngle:.06,animation:!0,colorType:"literal"}))},Ae=function(e){var t={td:e.ctd,tc:e.ctc,ad:e.cad,d:e.d};return e.d=Array(7).fill(Array(24).fill(0)),[Object(o.a)({},e),t]},De=function(e,t){return Object(o.a)(Object(o.a)({},e),{},{ctd:t.td,ctc:t.tc,cad:t.ad,d:t.d})};function Ie(){for(var e={td:0,tc:0,ad:0,ctd:0,ctc:0,cad:0,d:Array(7)},t=0;t<7;t++)e.d[t]=Array(24).fill(0);return e}function Le(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=a?1:-1;t.td+=n,t.tc+=parseFloat(e.price)*n,t.ad=parseFloat(t.tc)/parseFloat(t.td);var r=new Date(e.date);t.d[r.getDay()][r.getHours()-1]+=n}var Fe={getDefaultMetrics:Ie,recalculateMetrics:function(){var e=JSON.parse(localStorage.getItem("drinkids")),t=Ie(),a=Ie(),n=new Date,r=n.getMonth(),c=n.getFullYear();e.forEach((function(e){var n=JSON.parse(localStorage.getItem(e)),l=new Date(n.date);l.getMonth()===r&&l.getFullYear()===c&&Le(n,t),Le(n,a)}));var l=De(t,a);return localStorage.setItem("metrics",JSON.stringify(l)),l},updateMetrics:Le,addDrink:function(e,t){var a=JSON.parse(localStorage.getItem("drinkids")),n=Ae(JSON.parse(localStorage.getItem("metrics"))),r=Object(s.a)(n,2),c=r[0],l=r[1],i=new Date,o=i.getMonth(),u=i.getFullYear(),d=new Date(e.date);a.length?function e(t,a,n,r,c){if(c<=r)return n.splice(a<new Date(JSON.parse(localStorage.getItem(n[r])).date)?r+1:r,0,t);var l=parseInt((c-r)/2+r),i=new Date(JSON.parse(localStorage.getItem(n[l])).date);return a.getTime()===i.getTime()?n.splice(l+1,0,t):a<i?e(t,a,n,l+1,c):e(t,a,n,r,l-1)}(t,d,a,0,a.length-1):a.push(t),d.getMonth()===o&&d.getFullYear()===u&&Le(e,c),Le(e,l);var m=De(c,l);return localStorage.setItem(t,JSON.stringify(e)),localStorage.setItem("drinkids",JSON.stringify(a)),localStorage.setItem("metrics",JSON.stringify(m)),m},deleteDrink:function(e){var t=JSON.parse(localStorage.getItem("drinkids")),a=Ae(JSON.parse(localStorage.getItem("metrics"))),n=Object(s.a)(a,2),r=n[0],c=n[1],l=JSON.parse(localStorage.getItem(e)),i=new Date,o=i.getMonth(),u=i.getFullYear(),d=new Date(l.date);d.getMonth()===o&&d.getFullYear()===u&&Le(l,r,!1),Le(l,c,!1);var m=t.indexOf(e);m>-1&&t.splice(m,1);var p=De(r,c);return localStorage.removeItem(e),localStorage.setItem("drinkids",JSON.stringify(t)),localStorage.setItem("metrics",JSON.stringify(p)),p},resetMonthly:function(e){var t=Ie(),a=new Date,n=a.getMonth(),r=a.getFullYear();e.forEach((function(e){var a=JSON.parse(localStorage.getItem(e)),c=new Date(a.date);if(c.getMonth()!==n||c.getFullYear()!==r)return localStorage.setItem("metrics",JSON.stringify(t)),t;Le(a,t)}));var c=JSON.parse(localStorage.getItem("metrics"));return localStorage.setItem("metrics",JSON.stringify(Object(o.a)(Object(o.a)({},t),{},{ctd:c.ctd,ctc:c.ctc,cad:c.cad}))),c}},Pe=function(e){var t=Object(n.useState)(Fe.getDefaultMetrics()),a=Object(s.a)(t,2),r=a[0],c=a[1],l=Object(n.useContext)(ye),i=Object(s.a)(l,1)[0];return Object(n.useEffect)((function(){if(void 0===e||i.uid===e)return c(JSON.parse(localStorage.getItem("metrics")));c({}),P.collection("users/".concat(e,"/user")).doc("stats").get().then((function(e){c(e.data())})).catch(Y)}),[e,i.uid]),r},Te=(a(207),function(){var e=Object(d.a)().t,t=Pe(),a=Object(n.useContext)(ye),c=Object(s.a)(a,1)[0],l=Object(n.useState)(Array(7).fill(Array(24).fill(0))),i=Object(s.a)(l,2),o=i[0],u=i[1],p=Object(n.useState)(window.innerWidth-40),f=Object(s.a)(p,2),b=f[0],v=f[1],g=function(){v(window.innerWidth-40)};return Object(n.useEffect)((function(){return window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[v]),Object(n.useEffect)((function(){(null===t||void 0===t?void 0:t.d)&&u(t.d)}),[t]),r.a.createElement("div",{className:"dashboard-page"},r.a.createElement("h4",{className:"bw title"},e("Monthly Spending")),r.a.createElement(h,{id:"chart-holder"},r.a.createElement("div",{className:"description"},e("MONTHLY LIMIT"),": ",e("$"),m(c.profile.budget,c.profile.budget/1e4>1),r.a.createElement("br",null),r.a.createElement("span",null,e("$"),m(t.tc,t.tc/1e4>1)),r.a.createElement("br",null),e("REMAINING"),": ",e("$"),m(c.profile.budget-t.tc)),r.a.createElement(Ce,{budget:c.profile.budget,spent:t.tc,width:b})),r.a.createElement(h,{className:"budget"},r.a.createElement("p",null,e("This is how much you\u2019ve spent on drinks so far"),":"),r.a.createElement("h2",{className:"bw"},e("$"),m(t.ctc,t.ctc/1e4>1))),r.a.createElement(h,{className:"limit",style:{backgroundPositionY:2.7*(100-parseInt(t.td/c.profile.limit*100))}},r.a.createElement("h3",{className:"bw"},parseInt(t.td/c.profile.limit*100),"%"),r.a.createElement("p",null,e("to your max number of drinks this month"))),r.a.createElement(h,{className:"total"},r.a.createElement("h2",{className:"bw"},t.td),r.a.createElement("p",null,e("drinks this month"))),r.a.createElement(Ne,{data:o,width:b}),r.a.createElement(xe,{data:o,width:b}))}),Me=a(35),Re=a(145),Ue=a(24),Je=a(287),Be=function(){var e=Object(N.a)(k.a.mark((function e(t,a){var n,r,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.collection("users/".concat(a,"/drinks")).add(Object(o.a)({created:D.a.firestore.FieldValue.serverTimestamp(),edited:D.a.firestore.FieldValue.serverTimestamp()},t));case 3:return n=e.sent,e.next=6,n.get();case 6:return r=e.sent,c=Object(o.a)({id:r.id},r.data().drink),e.abrupt("return",Ye(c,a));case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",H(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}(),We=function(){var e=Object(N.a)(k.a.mark((function e(t,a,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.collection("users/".concat(n,"/drinks")).doc(a).set(Object(o.a)({edited:D.a.firestore.FieldValue.serverTimestamp()},t));case 3:return Fe.deleteDrink(a),e.abrupt("return",Ye(Object(o.a)({id:a},t.drink),n,!0));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",H(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Ye=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Fe.addDrink(e,e.id);n.d=JSON.stringify(n.d),P.collection("users/".concat(t,"/user")).doc("stats").set(n).finally((function(){x.a.fire(C.a.t("Done!"),C.a.t(a?"Drink updated":"Drink added"),"success")}))},He=a(82),Ve=(a(208),Object(i.h)((function(e){var t,a,c,l,i,o,u,m=e.pageTitle,p=e.buttonTitle,f=e.editData,b=e.history,v=Object(n.useContext)(ye),g=Object(s.a)(v,1)[0],O=Object(d.a)().t,y=Object(n.useState)(null!==(t=null===f||void 0===f?void 0:f.name)&&void 0!==t?t:""),j=Object(s.a)(y,2),w=j[0],S=j[1],A=Object(n.useState)(null!==(a=null===f||void 0===f?void 0:f.image)&&void 0!==a?a:""),I=Object(s.a)(A,2),L=I[0],F=I[1],T=Object(n.useState)(""),M=Object(s.a)(T,2),R=M[0],U=M[1],J=Object(n.useState)(null!==(c=null===f||void 0===f?void 0:f.location)&&void 0!==c?c:""),B=Object(s.a)(J,2),W=B[0],V=B[1],$=Object(n.useState)(null!==(l=null===f||void 0===f?void 0:f.price)&&void 0!==l?l:""),q=Object(s.a)($,2),G=q[0],z=q[1],_=Object(n.useState)(null!==(i=null===f||void 0===f?void 0:f.date)&&void 0!==i?i:new Date),K=Object(s.a)(_,2),X=K[0],Q=K[1],Z=Object(n.useState)(null!==(o=null===f||void 0===f?void 0:f.rating)&&void 0!==o?o:0),ee=Object(s.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(null!==(u=null===f||void 0===f?void 0:f.description)&&void 0!==u?u:""),re=Object(s.a)(ne,2),ce=re[0],le=re[1],ie=Object(n.useRef)(null),oe=Object(n.useState)(-1),se=Object(s.a)(oe,2),de=se[0],me=se[1],pe=Object(n.useState)([]),fe=Object(s.a)(pe,2),he=fe[0],be=fe[1],ve=Object(n.useState)(!0),ge=Object(s.a)(ve,2),Ee=ge[0],Oe=ge[1],je=Object(n.useState)(!0),we=Object(s.a)(je,2),ke=we[0],Ne=we[1];Object(n.useEffect)((function(){var e;be(JSON.parse(null!==(e=localStorage.getItem("autofill"))&&void 0!==e?e:"[]"))}),[]),Object(n.useEffect)((function(){var e,t,a,n,r,c;S(null!==(e=null===f||void 0===f?void 0:f.name)&&void 0!==e?e:""),V(null!==(t=null===f||void 0===f?void 0:f.location)&&void 0!==t?t:""),z(null==(null===f||void 0===f?void 0:f.price)?"":f.price/100),Q(null!==(a=null===f||void 0===f?void 0:f.date)&&void 0!==a?a:new Date),F(null!==(n=null===f||void 0===f?void 0:f.image)&&void 0!==n?n:""),ae(null!==(r=null===f||void 0===f?void 0:f.rating)&&void 0!==r?r:0),le(null!==(c=null===f||void 0===f?void 0:f.description)&&void 0!==c?c:"")}),[f]);var Se,xe=function(e){return function(t){t.preventDefault(),t.target.value.length>=80||e(t.target.value)}},Ce=function(){var e=Object(N.a)(k.a.mark((function e(t){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Oe(!1),a={drink:{name:w,location:W,price:parseInt(100*parseFloat(G)),date:new Date(X).toISOString(),image:L,description:ce,rating:te}},!isNaN(a.drink.price)){e.next=6;break}return x.a.fire(C.a.t("Oops..."),C.a.t("Please enter a valid price to add drink"),"error"),e.abrupt("return",Oe(!0));case 6:if(void 0!==(null===f||void 0===f?void 0:f.id)&&null!==(null===f||void 0===f?void 0:f.id)){e.next=11;break}return e.next=9,Be(a,g.uid);case 9:e.next=13;break;case 11:return e.next=13,We(a,f.id,g.uid);case 13:S(""),V(""),z(""),Q(new Date),ae(0),le(""),F(""),me(-1),Ne(!0),Oe(!0),b.push("/history");case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(N.a)(k.a.mark((function e(t){var a,n,r,c,l;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===ie||void 0===ie||null===(a=ie.current)||void 0===a||null===(n=a.files)||void 0===n?void 0:n[0],c="drinks/".concat(g.uid,"/post-").concat((new Date).valueOf()),(l=D.a.storage().ref().child(c).put(r)).on("state_changed",(function(e){me(parseInt(e.bytesTransferred/e.totalBytes*100))}),(function(e){"storage/canceled"===e.code?me(-1):Y(JSON.stringify(e))}),(function(){F(c),l.snapshot.ref.getDownloadURL().then((function(e){U(e)}))}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return de<0?e:de<100?t:a};return r.a.createElement("form",{className:"add-modal",onSubmit:Ce},r.a.createElement("h4",{className:"bw title"},O(null!==m&&void 0!==m?m:"Add a Purchase")),r.a.createElement(h,{className:"add-holder"},r.a.createElement("h5",null,O("WHAT'S THE TEA?")),r.a.createElement("div",{className:"content"},r.a.createElement("label",{className:"autofill-label"},"Autofill with saved entry:"),r.a.createElement(He.a,{options:he,name:"autofill",onChange:function(e){x.a.fire({showCancelButton:!0,html:"use or remove entry? <br />(click outside to cancel)",cancelButtonText:"remove",confirmButtonText:"autofill",cancelButtonColor:"#f44",reverseButtons:!0}).then((function(t){if(t.value)S(e.name),V(e.location),z(e.price/100),ae(e.rating),le(e.description);else if("cancel"===t.dismiss){var a=Object(Me.a)(he);a.splice(a.findIndex((function(t){return t.value===e.value})),1),P.collection("users/".concat(g.uid,"/user")).doc("autofill").set({data:JSON.stringify(a)}).then((function(){localStorage.setItem("autofill",JSON.stringify(a)),be(a)})).catch(H)}}))},className:"autofill-select"}),r.a.createElement("div",{className:"autofill-divider"},"or add a new drink:"),r.a.createElement(E,{value:W,onChange:xe(V),label:O("Location"),id:"location-input"}),r.a.createElement(E,{value:w,onChange:xe(S),label:O("Drink Name"),id:"name-input"}),r.a.createElement(E,{value:G,onChange:function(e){e.target.value.match(/^-?\d*\.?\d*$/)&&e.target.value.length<10&&z(e.target.value)},label:O("Price"),id:"price-input",type:"text"}),r.a.createElement(Ue.a,{utils:Re.a},r.a.createElement(Je.a,{id:"date-value",className:"add-input",format:"M/d/yyyy h:mm",label:O("Date"),value:X,onChange:function(e){Q(e)},inputProps:{maxLength:100}}))),r.a.createElement(ue,{rating:te,setRating:ae}),r.a.createElement("div",{className:"content"},r.a.createElement("label",{className:"upload-image ".concat(De("","uploading","uploaded"))},""!==R&&r.a.createElement("img",{className:"upload-preview",src:R,alt:"upload-preview"}),De("UPLOAD AN IMAGE","UPLOADING..."),r.a.createElement("input",{type:"file",ref:ie,onChange:Ae,accept:"image/png,image/jpeg"}),r.a.createElement("br",null),De("",r.a.createElement("progress",{max:"100",value:De(0,de,100)}),"")),r.a.createElement("textarea",{value:ce,rows:10,onChange:(Se=le,function(e){e.preventDefault(),e.target.value.length>=300||Se(e.target.value)}),id:"description-input",placeholder:O("How was your drink?")}),r.a.createElement("div",{className:"add-button-holder"},r.a.createElement("button",{disabled:!ke,onClick:function(e){if(e.preventDefault(),""!==w){if(ke){var t=[].concat(Object(Me.a)(he),[{name:w,location:W,price:parseInt(100*parseFloat(G)),description:ce,rating:te,label:w,value:w+(new Date).toISOString()}]);Ne(!1),P.collection("users/".concat(g.uid,"/user")).doc("autofill").set({data:JSON.stringify(t)}).then((function(){be(t),localStorage.setItem("autofill",JSON.stringify(t)),x.a.fire(C.a.t("Saved!"),C.a.t("You can now autofill your next purchase with these drink details."),"success")})).catch((function(e){Ne(!0),H(e)}))}}else x.a.fire(C.a.t("Can't save drink without name"),C.a.t("Please add a name to save to the autofill list"),"error")},className:"text save ".concat(ke?"":"saved")},O(ke?"SAVE":"SAVED")),r.a.createElement("div",null),r.a.createElement("button",{type:"submit",disabled:!Ee,className:"text"},O(null!==p&&void 0!==p?p:"ADD"))))))}))),$e=Object(i.h)((function(e){var t=e.match,a=Object(n.useState)(null),c=Object(s.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){var e;(null===t||void 0===t||null===(e=t.params)||void 0===e?void 0:e.drinkid)&&i(JSON.parse(localStorage.getItem(t.params.drinkid)))}),[t]),r.a.createElement(Ve,{pageTitle:"Edit a Purchase",buttonTitle:"UPDATE",editData:l})})),qe=a(135),Ge=a.n(qe),ze=a(136),_e=a.n(ze),Ke=[a(133),a(134)],Xe=[{value:0,label:"default"},{value:1,label:"dark"}],Qe=function(e){localStorage.setItem("theme",e);var t=Ke[e].themeStyles;for(var a in t)document.documentElement.style.setProperty(a,t[a])},Ze=function(){var e;return Number(null!==(e=localStorage.getItem("theme"))&&void 0!==e?e:0)},et=function(){Qe(Ze())},tt=a(102),at=a.n(tt),nt=(a(209),a(103)),rt=(a(210),nt.data.length),ct=function(e){var t=e.img,n=e.title,c=e.path,l=e.desc;return r.a.createElement("div",{className:"slide"},void 0===t?"":r.a.createElement("img",{alt:"",src:a(211)("./"+t)}),r.a.createElement("h3",null,n),r.a.createElement("span",null,(null!==c&&void 0!==c?c:[]).join(" > ")),r.a.createElement("p",null,l))},lt=function(e){var t=e.open,a=e.setOpen,c=Object(n.useState)(0),l=Object(s.a)(c,2),i=l[0],o=l[1],u=Object(d.a)().t;return r.a.createElement(g,{open:t,setOpen:a},r.a.createElement("div",{className:"help-content"},r.a.createElement("h2",null,u("What's New?")),r.a.createElement(at.a,{slides:nt.data.map((function(e){return r.a.createElement(ct,Object.assign({key:e.title},e))})),value:i,onChange:o,animationSpeed:250}),r.a.createElement(tt.Dots,{value:i,number:rt,onChange:o})))},it=(a(222),a(223),function(e){var t,a,c,l=e.open,i=e.setOpen,u=Object(d.a)().t,m=Object(n.useContext)(ye),p=Object(s.a)(m,2),f=p[0],h=p[1],b=Object(n.useState)((null!==(t=f.profile.budget)&&void 0!==t?t:1e4)/100),v=Object(s.a)(b,2),O=v[0],y=v[1],j=Object(n.useState)(null!==(a=f.profile.limit)&&void 0!==a?a:15),w=Object(s.a)(j,2),k=w[0],N=w[1],S=Object(n.useState)(null!==(c=f.profile.sharing)&&void 0!==c&&c),x=Object(s.a)(S,2),C=x[0],A=x[1],D=Object(n.useState)(!1),I=Object(s.a)(D,2),L=I[0],F=I[1];Object(n.useEffect)((function(){y(f.profile.budget/100),N(f.profile.limit),A(f.profile.sharing)}),[l,f]);var T=function(e){return function(t){e(t.target.value)}},M=function(){i(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{open:l,setOpen:i},r.a.createElement("div",{className:"user-modal"},r.a.createElement("img",{src:f.photoURL,className:"avatar",alt:"user"}),r.a.createElement("button",{className:"close-button",onClick:M},r.a.createElement(Ge.a,null)),r.a.createElement("button",{className:"help-button",onClick:function(){F(!L)}},r.a.createElement(_e.a,null)),r.a.createElement("h1",null,u("User Settings")),r.a.createElement(E,{id:"monthly-spending-input",type:"tel",pattern:"^-?[0-9]\\d*\\.?\\d*$",className:"input",variant:"outlined",margin:"normal",onChange:T(y),value:O,label:u("Monthly Spending Limit")}),r.a.createElement(E,{id:"monthly-drinking-limit",type:"tel",pattern:"^-?[0-9]\\d*\\.?\\d*$",className:"input",margin:"dense",variant:"outlined",onChange:T(N),value:k,label:u("Max of drinks / month")}),r.a.createElement("label",{className:"theme-label"},"Theme:"),r.a.createElement(He.a,{options:Xe,defaultValue:Xe[Ze()],name:"theme",onChange:function(e){var t=e.value;Qe(t)},className:"theme-select"}),r.a.createElement("div",{className:"button-holder"},r.a.createElement("button",{className:"logout text",onClick:R},u("LOGOUT")),r.a.createElement("button",{className:"update",onClick:function(){var e={budget:parseInt(100*parseFloat(O)),limit:parseInt(k),sharing:C};P.collection("users/".concat(f.uid,"/user")).doc("profile").set(e).then((function(){h((function(t){return Object(o.a)(Object(o.a)({},t),{},{profile:e})})),M()}))}},u("UPDATE"))))),r.a.createElement(lt,{open:L,setOpen:F}))}),ot=a(137),st=a.n(ot),ut=a(138),dt=a.n(ut),mt=(a(224),function(e){var t=e.name,a=e.location,c=e.description,l=e.expanded,i=e.image,o=e.date,u=Object(d.a)().t,m=Object(n.useState)(!1),p=Object(s.a)(m,2),f=p[0],h=p[1];return Object(n.useEffect)((function(){l&&i&&(console.log("asked for image"),D.a.storage().ref(i).getDownloadURL().then((function(e){h(e)})).catch((function(e){e.code})))}),[i,l]),r.a.createElement("div",{className:"expanded-drink-description--wrapper"},r.a.createElement("p",{className:"title"},t,r.a.createElement("br",null),r.a.createElement("span",null,"@",a)),f&&r.a.createElement("img",{src:f,className:"user-uploaded",alt:"user-upload"}),r.a.createElement("br",null),r.a.createElement("p",{className:"description"},c),r.a.createElement("br",null),r.a.createElement("p",{className:"date"},r.a.createElement("span",null,u("on"))," ",o))}),pt=(a(225),a(86)),ft=a(147),ht=a(285),bt=Object(i.h)((function(e){var t=e.data,a=e.history,c=e.triggerUpdate,l=Object(n.useContext)(ye),i=Object(s.a)(l,1)[0],u=Object(d.a)().t,p=Object(n.useState)(!1),h=Object(s.a)(p,2),b=h[0],v=h[1],g=Object(n.useState)(!0),E=Object(s.a)(g,2),O=E[0],y=E[1],j=function(){var e=Object(N.a)(k.a.mark((function e(){var a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!1),e.prev=1,e.next=4,P.collection("users/".concat(i.uid,"/blog")).doc("user").get();case 4:if(n=e.sent,void 0===(n=null===(a=n.data())||void 0===a?void 0:a.restrictedUntil)||!Object(pt.a)(new Date(n),new Date)){e.next=9;break}return y(!0),e.abrupt("return",(c=Object(ft.a)(new Date(n),"eee. LLLL d, yyyy h:mm:ss aaaa"),void x.a.fire(C.a.t("Oh no!"),C.a.t("You can't publish a new post until ")+c+C.a.t(". If the time restriction is greater than 1 minute, you have likely been temporarily banned from posting."),"error")));case 9:return t.id,r=Object(f.a)(t,["id"]),e.next=12,P.collection("blogs").add(Object(o.a)({uid:i.uid,likes:0,published:D.a.firestore.FieldValue.serverTimestamp(),edited:D.a.firestore.FieldValue.serverTimestamp()},r));case 12:P.collection("users/".concat(i.uid,"/blog")).doc("user").set({restrictedUntil:Object(ht.a)(new Date,30).toISOString()},{merge:!0}),x.a.fire(C.a.t("Success!"),C.a.t("Drink published on your blog!"),"success"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(1),y(!0),H(e.t0);case 20:case"end":return e.stop()}var c}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}(),w=new Date(t.date).toDateString();return r.a.createElement("div",{className:"drink-panel"},r.a.createElement("div",{className:"info",onClick:function(){v(!b)}},r.a.createElement("p",{className:"place"},t.location),r.a.createElement("p",{className:"price"},u("$"),m(t.price)),r.a.createElement("div",{className:"expand-icon"},b?r.a.createElement(st.a,null):r.a.createElement(dt.a,null)),r.a.createElement("p",{className:"name"},t.name),r.a.createElement("p",{className:"time"},w.substr(4))),r.a.createElement("div",{className:"collapsed-info"+(b?" expanded":"")},r.a.createElement(mt,Object.assign({},t,{expanded:b,date:w})),r.a.createElement("div",{className:"options"},r.a.createElement("button",{className:"text",onClick:j,disabled:!O},u("PUBLISH")),r.a.createElement("button",{className:"text",onClick:function(){a.push("/edit/"+t.id)}},u("EDIT")),r.a.createElement("button",{className:"text",onClick:function(){P.collection("users/".concat(i.uid,"/drinks")).doc(t.id).delete().then((function(){var e=Fe.deleteDrink(t.id);e.d=JSON.stringify(e.d),P.collection("users/".concat(i.uid,"/user")).doc("stats").set(e).finally((function(){x.a.fire(C.a.t("Deleted!"),C.a.t("Drink has been deleted"),"success"),c(JSON.parse(localStorage.getItem("drinkids")))}))})).catch((function(e){var t;Y(t=e),console.log("Please copy this error and send to ".concat("ryanqyang@gmail.com"),t),x.a.fire(C.a.t("Oops..."),C.a.t("Couldn't delete your drink. Try again later!"),"error")}))}},u("DELETE")))))})),vt=(a(226),function(e){var t=e.click;return r.a.createElement("div",{className:"thaman-color"},r.a.createElement("div",{className:"history-load-more",onClick:t},"\u2022 \u2022 \u2022"))}),gt=function(e){var t=e.label,a=Object(d.a)().t;return r.a.createElement("div",{className:"thaman-color none-label"},r.a.createElement("h3",{className:"bw none-label"},a(t)))},Et=function(){var e=Object(d.a)().t,t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)([]),u=Object(s.a)(i,2),p=u[0],f=u[1],h=Object(n.useState)({complete:5,recent:7}),b=Object(s.a)(h,2),v=b[0],g=b[1],E=Object(n.useState)([]),O=Object(s.a)(E,2),y=O[0],j=O[1],w=Object(n.useState)(JSON.parse(localStorage.getItem("drinkids"))),k=Object(s.a)(w,2),N=k[0],S=k[1],x=Object(n.useState)(JSON.parse(localStorage.getItem("metrics"))),C=Object(s.a)(x,2),A=C[0],D=C[1];Object(n.useEffect)((function(){D(JSON.parse(localStorage.getItem("metrics")));var e=[],t=[],a=[],n=new Date,c=n.getMonth(),i=n.getFullYear(),s=v.complete,u=v.recent;N.forEach((function(n){var l=JSON.parse(localStorage.getItem(n));a.push(l);var o=new Date(l.date),d=o.getMonth()===c&&o.getFullYear()===i;d&&u>0?(e.push(r.a.createElement(bt,{triggerUpdate:S,key:l.id,data:l})),u--):!d&&s>0&&(t.push(r.a.createElement(bt,{triggerUpdate:S,key:l.id,data:l})),s--)})),0===e.length&&(e.push(r.a.createElement(gt,{key:"@ryqndev/empty",label:"no drinks this month ...yet"})),0===t.length&&t.push(r.a.createElement(gt,{key:"@ryqndev/empty",label:"Add a drink to start!"}))),u<=0&&e.push(r.a.createElement(vt,{key:"@ryqndev/load",click:function(){g(Object(o.a)(Object(o.a)({},v),{},{recent:v.recent+10}))}})),s<=0&&t.push(r.a.createElement(vt,{key:"@ryqndev/load",click:function(){g(Object(o.a)(Object(o.a)({},v),{},{complete:v.complete+10}))}})),l([].concat(e)),f([].concat(t)),j(a)}),[N.length,N,v,v.recent,v.complete]);return r.a.createElement("div",{className:"history-page"},r.a.createElement("h3",{className:"bw"},e("Drink History")),r.a.createElement(X,{placeholder:e("Search your history..."),data:y,keys:["description","location","name","price"],Result:function(e){var t=e.item;e.matches;return r.a.createElement(bt,{triggerUpdate:S,data:t})}}),r.a.createElement("h3",{className:"bw"},e("Monthly Spending")),r.a.createElement("div",{className:"history-spending"},c),r.a.createElement("h3",{className:"bw history-total"},r.a.createElement("span",null,e("Monthly Total"),":")," ",e("$"),m(A.tc)),r.a.createElement("h3",{className:"bw"},e("Overall Spending")),r.a.createElement("div",{className:"history-spending"},p),r.a.createElement("h3",{className:"bw history-total"},r.a.createElement("span",null,e("Complete Total"),":")," ",e("$"),m(A.ctc)))},Ot=(a(227),{fontFamily:"Poppins",fontWeight:700,color:"white",fontSize:44,marginBottom:20}),yt=function(){return Object(n.useEffect)((function(){M.start("#auth-container",{signInSuccessUrl:window.location.href,signInFlow:"popup",signInOptions:[D.a.auth.GoogleAuthProvider.PROVIDER_ID,D.a.auth.FacebookAuthProvider.PROVIDER_ID]})})),r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"login-logo"}),r.a.createElement("h1",{style:Ot},"boba watch"),r.a.createElement("div",{id:"auth-container"}))},jt=new(a(139).a)("blogposts");jt.version(1).stores({blogposts:"&id, uid, date, likes, location, name, price, fave, edited, published"});var wt=function(e){return jt.blogposts.put(Object(o.a)(Object(o.a)({},e),{},{published:new D.a.firestore.Timestamp(e.published.seconds,e.published.nanoseconds).toDate().toString()}))},kt=function(e){return jt.blogposts.delete(e.id)},Nt=function(e){return new Promise((function(t){jt.blogposts.get(e,(function(e){t(e)}))}))},St=function(){var e=Object(N.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){jt.blogposts.toArray((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ct(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var At=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.7589 3.55723C10.6752 3.35482 10.4781 3.22276 10.2599 3.22276H7.35361L5.88318 0.274799C5.70012 -0.0915996 5.10018 -0.0915996 4.91712 0.274799L3.44615 3.22276H0.539864C0.321703 3.22276 0.124603 3.35482 0.0409023 3.55723C-0.0422579 3.7591 0.00364222 3.99236 0.158083 4.14661L2.63345 6.62751L1.64093 10.1102C1.57883 10.3283 1.65875 10.5621 1.84181 10.6958C2.02487 10.83 2.27165 10.8349 2.45957 10.7088L5.39988 8.74417L8.34019 10.7088C8.43145 10.7694 8.53567 10.7997 8.63989 10.7997C8.75167 10.7997 8.86345 10.765 8.95849 10.6958C9.14101 10.5621 9.22147 10.3283 9.15937 10.1102L8.16631 6.62751L10.6417 4.14661C10.7961 3.99236 10.8426 3.7591 10.7589 3.55723Z",stroke:"#F68080"}),Dt=function(e){var t=e.svgRef,a=e.title,n=Ct(e,["svgRef","title"]);return r.a.createElement("svg",xt({viewBox:"0 0 11 11",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,At)},It=r.a.forwardRef((function(e,t){return r.a.createElement(Dt,xt({svgRef:t},e))}));a.p;function Lt(){return(Lt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ft(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Pt=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.7589 3.55723C10.6752 3.35482 10.4781 3.22276 10.2599 3.22276H7.35361L5.88318 0.274799C5.70012 -0.0915996 5.10018 -0.0915996 4.91712 0.274799L3.44615 3.22276H0.539864C0.321703 3.22276 0.124603 3.35482 0.0409023 3.55723C-0.0422579 3.7591 0.00364222 3.99236 0.158083 4.14661L2.63345 6.62751L1.64093 10.1102C1.57883 10.3283 1.65875 10.5621 1.84181 10.6958C2.02487 10.83 2.27165 10.8349 2.45957 10.7088L5.39988 8.74417L8.34019 10.7088C8.43145 10.7694 8.53567 10.7997 8.63989 10.7997C8.75167 10.7997 8.86345 10.765 8.95849 10.6958C9.14101 10.5621 9.22147 10.3283 9.15937 10.1102L8.16631 6.62751L10.6417 4.14661C10.7961 3.99236 10.8426 3.7591 10.7589 3.55723Z",fill:"#F68080"}),Tt=function(e){var t=e.svgRef,a=e.title,n=Ft(e,["svgRef","title"]);return r.a.createElement("svg",Lt({viewBox:"0 0 11 11",fill:"none",ref:t},n),a?r.a.createElement("title",null,a):null,Pt)},Mt=r.a.forwardRef((function(e,t){return r.a.createElement(Tt,Lt({svgRef:t},e))})),Rt=(a.p,a(141)),Ut=a.n(Rt),Jt=a(140),Bt=a.n(Jt),Wt=a(81),Yt=a.n(Wt),Ht=new Yt.a,Vt=function(e){e.match,e.location;var t,a=e.children,c=(e.staticContext,e.expandable),l=void 0===c||c,i=e.person,u=e.isLiked,p=void 0!==u&&u,b=e.setExpand,v=Object(f.a)(e,["match","location","children","staticContext","expandable","person","isLiked","setExpand"]),g=Object(n.useContext)(ye),E=Object(s.a)(g,1)[0],O=Object(d.a)().t,y=Object(n.useState)(p),j=Object(s.a)(y,2),w=j[0],k=j[1],N=Object(n.useState)(null!==(t=null===v||void 0===v?void 0:v.likes)&&void 0!==t?t:0),S=Object(s.a)(N,2),x=S[0],C=S[1];return Object(n.useEffect)((function(){p||Nt(v.id).then((function(e){e&&k(!0)}))}),[p,v.id]),r.a.createElement(h,{className:"feed-item"},r.a.createElement("div",{className:"header"},r.a.createElement("span",null,Ht.clean(v.name)),r.a.createElement("p",{className:"favorite-amount"},p?"":x>999?(x/100>>0)+"k":x<0?0:x),r.a.createElement("div",{className:"favorite",onClick:function(){W(E.uid,v.id,v,!w).then((function(){C(x+(w?-1:1)),w?kt(v):wt(v),k(!w)})).catch((function(e){kt(v),k(!1)}))}},w?r.a.createElement(Bt.a,null):r.a.createElement(Ut.a,null))),r.a.createElement("div",{className:"item-content"},r.a.createElement("p",{className:"location"},Ht.clean(v.place)),r.a.createElement("p",{className:"price"},O("$"),m(v.price)),null!==v.rating&&void 0!==v.rating&&r.a.createElement("div",{className:"ratings-holder"},r.a.createElement(Z.a,{name:"rating",starCount:5,value:v.rating,renderStarIcon:function(e,t){return e<=t?r.a.createElement(Mt,null):r.a.createElement(It,null)}})),r.a.createElement("p",{className:"date"},new Date(v.date).toDateString()),r.a.createElement("p",{className:"description"},Ht.clean(l?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;return e.length>t?e.substr(e,t-4)+"...":e}(v.description):v.description)),l&&r.a.createElement("div",{className:"expand-wrapper"},r.a.createElement("button",{onClick:function(){b(Object(o.a)({show:!0,person:i},v))}},"view full post")),a))},$t=Vt,qt=Object(i.h)((function(e){var t,a,c=e.uid,l=e.history,i=Object(f.a)(e,["uid","history"]),o=Object(n.useState)(null),u=Object(s.a)(o,2),d=u[0],m=u[1];Object(n.useEffect)((function(){null===d&&Object(N.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:J(c).then((function(e){m(e.data())})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})))()}),[c,d]);return r.a.createElement("div",{className:"feed-avatar"},r.a.createElement("div",{className:"user",onClick:function(){l.push("/blog/"+c)}},r.a.createElement("img",{src:null!==(t=null===d||void 0===d?void 0:d.profile)&&void 0!==t?t:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",alt:" "}),r.a.createElement("h2",null,Ht.clean(null!==(a=null===d||void 0===d?void 0:d.name)&&void 0!==a?a:"Boba Bro"))),r.a.createElement(Vt,Object.assign({},i,{person:d,uid:c})))})),Gt=a(290),zt=(a(118),function(e){var t=e.displayCount,a=e.setDisplayCount,c=e.expand,l=Object(n.useState)([]),i=Object(s.a)(l,2),u=i[0],d=i[1],m=Object(n.useState)("published"),p=Object(s.a)(m,2),f=p[0],h=p[1],b=Object(n.useState)("all"),g=Object(s.a)(b,2),E=g[0],O=g[1];return Object(n.useEffect)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"published",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",n=arguments.length>3?arguments[3]:void 0,r=new Date;switch(a){case"week":r=Object(L.a)(r,1);break;case"month":r=Object(F.a)(r,1);break;case"all":default:r=new Date(0)}return r=D.a.firestore.Timestamp.fromDate(r),"published"===t?P.collection("blogs").orderBy("published","desc").where("published",">=",r).limit(e).onSnapshot(n):P.collection("blogs").orderBy("published").where("published",">=",r).orderBy(t,"desc").limit(e).onSnapshot(n)}(t,f,E,(function(e){d(e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})))}))}),[t,f,E]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"info-card"},r.a.createElement("h1",null,"EXPLORE"),"Check out what other users around the world are drinking right now or publish your own.",r.a.createElement("div",{className:"filter-split"},r.a.createElement("div",{className:"filter-border"},"currently showing:"),r.a.createElement("div",{className:"new-popular--toggle toggle"},r.a.createElement("div",{className:"left ".concat("published"===f&&"selected"),onClick:function(){h("published")}},"new"),r.a.createElement("div",{className:"right ".concat("likes"===f&&"selected"),onClick:function(){h("likes")}},"top")),r.a.createElement("div",{className:"time-length--toggle toggle"},r.a.createElement("div",{className:"left ".concat("week"===E&&"selected"),onClick:function(){O("week")}},"week"),r.a.createElement("div",{className:"month"===E?"selected":"",onClick:function(){O("month")}},"month"),r.a.createElement("div",{className:"right ".concat("all"===E&&"selected"),onClick:function(){O("all")}},"all")))),r.a.createElement(Gt.a,null,u.map((function(e,t){var a;return r.a.createElement(v.a,{timeout:250+50*t,classNames:"fade-left",key:e.id},r.a.createElement(qt,Object.assign({key:e.id,place:e.location,isLiked:null!==(a=null===e||void 0===e?void 0:e.fave)&&void 0!==a&&a,setExpand:c},e)))}))),u.length>=t&&r.a.createElement("div",{className:"show-more",onClick:function(){a((function(e){return e+8}))}},"Show more"))}),_t=function(e){var t=e.expand,a=Object(n.useState)([]),c=Object(s.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)((function(){var e=[];St().then((function(t){e=e.concat(t),i(e)}))}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"info-card"},r.a.createElement("h1",null,"FAVES"),"Look back at some of your favorite posts! Everytime you like a post, they'll show up here until you unlike them."),r.a.createElement(Gt.a,null,l.map((function(e,a){return r.a.createElement(v.a,{mountOnEnter:!0,unmountOnExit:!0,timeout:350+50*a,classNames:"fade-left",key:e.id},r.a.createElement(qt,Object.assign({key:e.id,place:e.location,isLiked:!0,setExpand:t},e)))}))))},Kt=(a(240),function(e){var t=e.ownerUID,a=e.initialDisplayCount,c=void 0===a?2:a,l=Object(n.useContext)(ye),i=Object(s.a)(l,1)[0],u=Object(n.useState)(null),d=Object(s.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(c),h=Object(s.a)(f,2),b=h[0],g=h[1];Object(n.useEffect)((function(){p(null);var e=!0,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=arguments.length>2?arguments[2]:void 0;return P.collection("blogs").where("uid","==",e).orderBy("date","desc").limit(t).onSnapshot(a)}(t,b,(function(t){e&&p(t.docs.map((function(e){return Object(o.a)({id:e.id},e.data())})))}),b);return function(){e=!1,a()}}),[t,b]);var E=function(e){z().then((function(t){t.value&&U(e).then(function(){var t=Object(N.a)(k.a.mark((function t(a){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.a.fire(C.a.t("Deleted!"),C.a.t("Your post has been deleted."),"success"),p(m.filter((function(t){return t.id!==e})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(H)}))};return r.a.createElement("div",{className:"blog-reviews--wrapper"},null===m?r.a.createElement("h3",{key:"@ryqndev/loading"},"Loading..."):0===(null===m||void 0===m?void 0:m.length)&&r.a.createElement("h3",{key:"@ryqndev/empty"},"No Published Reviews"),r.a.createElement(Gt.a,null,function(e){return e?e.map((function(e,a){return r.a.createElement(v.a,{mountOnEnter:!0,unmountOnExit:!0,timeout:350+50*a,classNames:"fade-left",key:e.id},r.a.createElement($t,Object.assign({place:e.location,expandable:!1},e),t===i.uid&&r.a.createElement("div",{className:"item-controls"},r.a.createElement("button",{onClick:function(){E(e.id)}},"DELETE"))))})):[]}(m)),m&&m.length>=b?r.a.createElement("div",{key:"@ryqndev/show",className:"more",onClick:function(){g(b+5)}},"Click to show more"):r.a.createElement("div",{key:"@ryqndev/end",className:"end"},"No more posts to show."))}),Xt=(a(241),Object(i.h)((function(e){var t=e.show,a=e.person,c=e.name,l=e.place,i=e.description,o=e.date,u=e.uid,d=e.image,m=e.id,p=e.history,f=Object(n.useState)(!0),h=Object(s.a)(f,2),b=h[0],v=h[1],g=Object(n.useContext)(ye),E=Object(s.a)(g,1)[0],O=function(){var e=Object(N.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:return v(!1),e.next=5,x.a.fire({input:"textarea",inputPlaceholder:"Reason for report...",inputAttributes:{"aria-label":"Reason for report...",maxlength:300},showCancelButton:!0});case 5:t=e.sent,(n=t.value)&&P.collection("reports").doc(m).set({[E.uid]:n,post:{desc:i,name:c,person:a,date:o,uid:u}},{merge:!0}).then((function(){x.a.fire("Report received!","Sorry you had to see that.... Thanks for reporting this to us so we can take a closer look at and take appropriate action","success"),v(!0)})).catch(H),v(!0);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t&&r.a.createElement("div",{className:"expanded-feed-item--wrapper"},r.a.createElement("div",{className:"user"},r.a.createElement("img",{src:a.profile,alt:" ",onClick:function(){p.push("/blog/"+u)}}),r.a.createElement("h2",null,a.name)),r.a.createElement("div",{className:"content"},r.a.createElement(mt,{name:c,location:l,description:i,img:d,date:new Date(o).toDateString()}),r.a.createElement("div",{className:"more-options-display"},r.a.createElement("button",{className:"share",onClick:function(){navigator.share({title:a.name+"'s profile",url:"https://share.boba.watch/#/"+u})}},"SHARE"),r.a.createElement("button",{className:"report",onClick:O},"REPORT")),r.a.createElement("h2",{className:"review"},r.a.createElement("span",null,"\u2605")," OTHER REVIEWS ",r.a.createElement("span",null,"\u2605")),r.a.createElement(Kt,{ownerUID:u,initialDisplayCount:1})))}))),Qt=Object(i.h)((function(e){var t=e.location,a=Object(d.a)().t,c=Object(n.useState)({show:!1}),l=Object(s.a)(c,2),o=l[0],m=l[1],p=Object(n.useState)(10),f=Object(s.a)(p,2),h=f[0],b=f[1];return r.a.createElement("div",{className:"feed-page"},r.a.createElement("div",{className:"feed-header"},r.a.createElement("div",{className:"icon"}),a("EXPLORE"),r.a.createElement(u.b,{className:"/feed"===t.pathname?"selected":"",to:"/feed"},a("PUBLIC")),r.a.createElement(u.b,{className:"/feed/fave"===t.pathname?"selected":"",to:"/feed/fave"},a("FAVES"))),r.a.createElement("div",{className:"content"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,strict:!0,path:"/feed"},r.a.createElement(zt,{expand:m,displayCount:h,setDisplayCount:b})),r.a.createElement(i.b,{exact:!0,strict:!0,path:"/feed/fave"},r.a.createElement(_t,{expand:m,displayCount:10}))),r.a.createElement("div",{className:"feed-end"},"No more posts to show")),r.a.createElement(g,{open:o.show,setOpen:function(e){m({show:e})}},r.a.createElement(Xt,o)))})),Zt=a(286),ea=function(e){var t=e.translate,a=void 0!==t&&t,n=e.children,c=Object(d.a)().t;return r.a.createElement(Zt.a,null,r.a.createElement(v.a,{key:n,classNames:"fade-quick",timeout:100},r.a.createElement("span",null,a?c(n):n)))},ta=(a(242),function(e){var t,a,n=e.totalDrinksPurchased,c=e.averageDrinkCost,l=e.totalSpent,i=Object(d.a)().t;return r.a.createElement("div",{className:"blog-stats--wrapper"},r.a.createElement("label",null,"DRINKS PURCHASED")," ",r.a.createElement("p",{className:"value"},r.a.createElement(ea,null,null!==n&&void 0!==n?n:"---")),r.a.createElement("label",null,"DRINK AVERAGE")," ",r.a.createElement("p",{className:"value"},r.a.createElement(ea,null,i("$"),null!==(t=m(c))&&void 0!==t?t:"---")),r.a.createElement("label",null,"TOTAL SPENT")," ",r.a.createElement("p",{className:"value"},r.a.createElement(ea,null,i("$"),null!==(a=m(l))&&void 0!==a?a:"---")))}),aa=a(143),na=a.n(aa),ra=a(104),ca=a.n(ra),la=(a(243),{budget:1e4,limit:15,sharing:!1}),ia={ad:0,cad:0,ctc:0,ctd:0,d:"[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]",fn:"Who dis?",tc:0,td:0},oa="Boba World",sa="Boba Lover",ua="Just a boba person in a boba world",da="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ma=a(142),pa=a.n(ma),fa=function(){var e=Object(n.useContext)(ye),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(d.a)().t;return r.a.createElement("div",{className:"user-share "},r.a.createElement("div",{className:"user-share-profile"},l("make profile public"),":",r.a.createElement(pa.a,{defaultChecked:a.profile.sharing,onClick:function(){var e=a.profile;P.doc("users/".concat(a.uid,"/user/profile")).set(Object(o.a)(Object(o.a)({},e),{},{sharing:!e.sharing})).then((function(){c((function(e){return Object(o.a)(Object(o.a)({},e),{},{profile:Object(o.a)(Object(o.a)({},e.profile),{},{sharing:!e.profile.sharing})})}))}))},label:l("make profile public")}),r.a.createElement(b,{className:"user-share-toggle-grid",open:a.profile.sharing},r.a.createElement(_,{text:"https://share.boba.watch/#/".concat(a.uid)}))))},ha=new Yt.a,ba=function(){var e=Object(i.g)().userid,t=Pe(e),a=Object(n.useContext)(ye),c=Object(s.a)(a,1)[0],l=Object(n.useState)("---"),o=Object(s.a)(l,2),u=o[0],d=o[1],m=Object(n.useState)(ua),p=Object(s.a)(m,2),f=p[0],h=p[1],b=Object(n.useState)(c.photoURL),v=Object(s.a)(b,2),g=v[0],E=v[1],O=Object(n.useState)(c.displayName),y=Object(s.a)(O,2),j=y[0],w=y[1],S=Object(n.useState)(!1),x=Object(s.a)(S,2),C=x[0],A=x[1];Object(n.useEffect)((function(){if(E(ca.a),w("Loading..."),A(e===c.uid),void 0!==e){var t=!0;return Object(N.a)(k.a.mark((function a(){var n,r,c,l,i,o,s;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,J(e);case 3:if(s=(s=a.sent).data(),t){a.next=7;break}return a.abrupt("return");case 7:h(ha.clean(null!==(n=null===(r=s)||void 0===r?void 0:r.bio)&&void 0!==n?n:ua)),w(null!==(c=s.name)&&void 0!==c?c:sa),E(null!==(l=s.profile)&&void 0!==l?l:da),d(ha.clean(null!==(i=null===(o=s)||void 0===o?void 0:o.location)&&void 0!==i?i:oa)),a.next=21;break;case 13:if(a.prev=13,a.t0=a.catch(0),t){a.next=17;break}return a.abrupt("return");case 17:h("This person does not exist. This could either be an error, a bug, or more likely, the user has privated their profile."),w("Who dis?"),E(ca.a),d("Not in Boba World :(");case 21:case"end":return a.stop()}}),a,null,[[0,13]])})))(),function(){t=!1}}}),[c,e]);var D=function(){var e=Object(N.a)(k.a.mark((function e(t,a,n,r){var l,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t();case 4:l=e.sent,(i=l.value)&&P.collection("users/".concat(c.uid,"/blog")).doc("user").update({[r]:i}).then((function(){n(i),a()})).catch(H);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"blog-page"},r.a.createElement("div",{className:"blog-header"}," ",r.a.createElement("div",{className:"icon"}),"PUBLIC PROFILE PREVIEW"),r.a.createElement("div",{className:"user"},r.a.createElement("img",{src:g,alt:" "}),r.a.createElement("h2",null,r.a.createElement(ea,{defaultKey:"Loading..."},j))),r.a.createElement("div",{className:"profile"},r.a.createElement(na.a,{className:"icon",onClick:function(){D(G,$,d,"location")}})," ",r.a.createElement(ea,null,u),r.a.createElement("p",{onClick:function(){D(q,V,h,"bio")}},r.a.createElement(ea,null,f)),C&&r.a.createElement(fa,null)),r.a.createElement(ta,{totalDrinksPurchased:t.ctd,averageDrinkCost:t.cad,totalSpent:t.ctc}),r.a.createElement("h2",{className:"review"},r.a.createElement("span",null,"\u2605")," REVIEWS ",r.a.createElement("span",null,"\u2605")),r.a.createElement("div",{className:"reviews-holder"},r.a.createElement(Kt,{ownerUID:e})))},va=function(e,t){localStorage.setItem("autofill","[]"),localStorage.setItem("drinkids","[]"),localStorage.setItem("metrics",JSON.stringify(Fe.getDefaultMetrics())),e.profile=Object(o.a)({},la);var a=P.batch();return a.set(P.collection("users/".concat(e.uid,"/user")).doc("stats"),ia),a.set(P.collection("users/".concat(e.uid,"/blog")).doc("user"),{name:null===e||void 0===e?void 0:e.displayName,profile:null===e||void 0===e?void 0:e.photoURL},{merge:!0}),a.set(P.collection("users/".concat(e.uid,"/user")).doc("profile"),la),a.commit().then((function(){t(e)}))},ga=function(e,t){Promise.all([P.collection("users/".concat(e.uid,"/user")).doc("autofill").get(),P.collection("users/".concat(e.uid,"/user")).doc("profile").get(),P.collection("users/".concat(e.uid,"/drinks")).orderBy("drink.date","desc").get()]).then((function(a){var n,r,c,l,i=Object(s.a)(a,3),u=i[0],d=i[1],m=i[2],p=[];m.forEach((function(e){localStorage.setItem(e.id,JSON.stringify(Object(o.a)({id:e.id},e.data().drink))),p.push(e.id)})),localStorage.setItem("autofill",null!==(n=null===u||void 0===u||null===(r=u.data())||void 0===r?void 0:r.data)&&void 0!==n?n:"[]"),localStorage.setItem("drinkids",JSON.stringify(p)),Fe.recalculateMetrics(),e.profile=Object(o.a)({sharing:null!==(c=null!==(l=null===d||void 0===d?void 0:d.sharing)&&void 0!==l?l:null===d||void 0===d?void 0:d.public)&&void 0!==c&&c},d.data()),P.collection("users/".concat(e.uid,"/blog")).doc("user").set({name:null===e||void 0===e?void 0:e.displayName,profile:null===e||void 0===e?void 0:e.photoURL},{merge:!0}).finally((function(){t(e)}))}))},Ea=function(e,t){Promise.all([P.collection("users/".concat(e.uid,"/user")).doc("autofill").get(),P.collection("users/".concat(e.uid,"/user")).doc("profile").get()]).then((function(a){var n,r,c,l,i=Object(s.a)(a,2),u=i[0],d=i[1];Fe.recalculateMetrics(),localStorage.setItem("autofill",null!==(n=null===u||void 0===u||null===(r=u.data())||void 0===r?void 0:r.data)&&void 0!==n?n:"[]"),e.profile=Object(o.a)({sharing:null!==(c=null!==(l=null===d||void 0===d?void 0:d.sharing)&&void 0!==l?l:null===d||void 0===d?void 0:d.public)&&void 0!==c&&c},d.data()),t(e)}))},Oa=function(e){D.a.auth().onAuthStateChanged((function(t){var a,n,r,c,l;return t?(T.logEvent("login"),(null===(a=t={displayName:(l=t).displayName,metadata:l.metadata,photoURL:l.photoURL,email:l.email,emailVerified:l.emailVerified,uid:l.uid,isAnonymous:l.isAnonymous,providerData:l.providerData})||void 0===a||null===(n=a.metadata)||void 0===n?void 0:n.creationTime)===(null===(r=t)||void 0===r||null===(c=r.metadata)||void 0===c?void 0:c.lastSignInTime)?va(t,e):localStorage.getItem("drinkids")?void Ea(t,e):ga(t,e)):e(t)}))},ya=function(e){var t=e.path,a=e.children;return r.a.createElement(i.b,{exact:!0,path:t},(function(e){var t=e.match;return r.a.createElement(v.a,{unmountOnExit:!0,mountOnEnter:!0,in:null!=t,timeout:100,classNames:"fade-quick"},r.a.createElement("div",{className:"page with-user"},a))}))},ja=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(ye),d=Object(s.a)(l,1)[0];return Object(n.useEffect)((function(){try{e=d.uid,function t(a){B(e,1,a).then((function(e){var a=e.docs[0];void 0!==a&&Nt(a.id).then((function(e){e||(wt(Object(o.a)({id:a.id},a.data())),t(a))}))}))}(0)}catch(t){Y(t)}var e}),[d.uid]),r.a.createElement(u.a,{basename:""},r.a.createElement(ya,{path:"/"},r.a.createElement(Te,null),r.a.createElement(wa,{setUser:c})),r.a.createElement(ya,{path:"/history"},r.a.createElement(Et,null),r.a.createElement(wa,{setUser:c})),r.a.createElement(ya,{path:"/add"},r.a.createElement(Ve,null),r.a.createElement(wa,{setUser:c})),r.a.createElement(ya,{path:"/edit/:drinkid"},r.a.createElement($e,null),r.a.createElement(wa,{setUser:c})),r.a.createElement(i.b,{strict:!0,path:"/feed"},r.a.createElement("div",{className:"page"},r.a.createElement(Qt,null))),r.a.createElement(i.b,{exact:!0,path:"/blog/:userid"},r.a.createElement("div",{className:"page"},r.a.createElement(ba,null))),r.a.createElement(it,{open:a,setOpen:c}),r.a.createElement(je,null))},wa=function(e){var t=e.setUser,a=Object(n.useContext)(ye),c=Object(s.a)(a,1)[0];return r.a.createElement("img",{src:c.photoURL,alt:"user settings",className:"avatar-button",onClick:t.bind(null,!0)})},ka=Object(i.h)((function(e){var t=e.history,a=Object(n.useState)(),c=Object(s.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){et(),Oa((function(e){o(e),t.push(e?"/app":"/login")})),console.log("v2.07")}),[t]),r.a.createElement(ye.Provider,{value:[l,o]},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"}),r.a.createElement(i.b,{path:"/login"},r.a.createElement(yt,null)),r.a.createElement(i.b,{path:"/app"},r.a.createElement(ja,null))))})),Na=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Sa(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}window.isUpdateAvailable=new Promise((function(e,t){"serviceWorker"in navigator&&navigator.serviceWorker.register("service-worker.js").then((function(t){t.onupdatefound=function(){var a=t.installing;a.onstatechange=function(){switch(a.state){case"installed":navigator.serviceWorker.controller?e(!0):e(!1)}}}})).catch((function(e){return console.error("[SW ERROR]",e)}))}));a(247),a(248),a(249);var xa=a(148),Ca=a(66),Aa={en:a(144)};C.a.use(xa.a).use(Ca.e).init({resources:Aa,detection:{order:["localStorage","navigator"],lookupLocalStorage:"i18n",caches:["localStorage"],checkWhitelist:!0},lng:"en",fallbackLng:"en",keySeparator:!1,interpolation:{escapeValue:!1}});C.a;try{l.a.render(r.a.createElement(i.a,{basename:"",initialEntries:["/","/login","/app"],initialIndex:0},r.a.createElement(ka,null)),document.getElementById("root"))}catch(Da){R()}!function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Na?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Sa(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Sa(t,e)}))}}()}},[[163,1,2]]]);
//# sourceMappingURL=main.8b8624ac.chunk.js.map